/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./style/main.scss":
/*!*************************!*\
  !*** ./style/main.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/animation/animation-dark.scss":
/*!*****************************************************!*\
  !*** ./ts/components/animation/animation-dark.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/animation/animation-light.scss":
/*!******************************************************!*\
  !*** ./ts/components/animation/animation-light.scss ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/footer/footer.scss":
/*!******************************************!*\
  !*** ./ts/components/footer/footer.scss ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/header/header.scss":
/*!******************************************!*\
  !*** ./ts/components/header/header.scss ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/header/nav-menu/nav-menu.scss":
/*!*****************************************************!*\
  !*** ./ts/components/header/nav-menu/nav-menu.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/auth-page/auth-page.scss":
/*!*****************************************************!*\
  !*** ./ts/components/main/auth-page/auth-page.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/favor-page/favor-page.scss":
/*!*******************************************************!*\
  !*** ./ts/components/main/favor-page/favor-page.scss ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/lesson-page/lesson-page.scss":
/*!*********************************************************!*\
  !*** ./ts/components/main/lesson-page/lesson-page.scss ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/main-page.scss":
/*!*******************************************!*\
  !*** ./ts/components/main/main-page.scss ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-auth-page.scss":
/*!*************************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-auth-page.scss ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-paginations.scss":
/*!**************************************************************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-paginations.scss ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.scss":
/*!************************************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.scss ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/main-page/main-page.scss":
/*!*****************************************************!*\
  !*** ./ts/components/main/main-page/main-page.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/set-page/changePassword/change-password.scss":
/*!*************************************************************************!*\
  !*** ./ts/components/main/set-page/changePassword/change-password.scss ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/set-page/set-page.scss":
/*!***************************************************!*\
  !*** ./ts/components/main/set-page/set-page.scss ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/set-page/set-popup/popup.scss":
/*!**********************************************************!*\
  !*** ./ts/components/main/set-page/set-popup/popup.scss ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/set-page/sound-el/sound-el.scss":
/*!************************************************************!*\
  !*** ./ts/components/main/set-page/sound-el/sound-el.scss ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/set-page/switcher-el/switcher.scss":
/*!***************************************************************!*\
  !*** ./ts/components/main/set-page/switcher-el/switcher.scss ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/spinner/spinner.scss":
/*!*************************************************!*\
  !*** ./ts/components/main/spinner/spinner.scss ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/statist-page/statist-page.scss":
/*!***********************************************************!*\
  !*** ./ts/components/main/statist-page/statist-page.scss ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/task-page/task-page.scss":
/*!*****************************************************!*\
  !*** ./ts/components/main/task-page/task-page.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/test-page/test-page.scss":
/*!*****************************************************!*\
  !*** ./ts/components/main/test-page/test-page.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./ts/components/main/unauth-page/unauth-page.scss":
/*!*********************************************************!*\
  !*** ./ts/components/main/unauth-page/unauth-page.scss ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _style_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/main.scss */ "./style/main.scss");
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap */ "../node_modules/bootstrap/dist/js/bootstrap.esm.js");
/* harmony import */ var _ts_components_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ts/components/app */ "./ts/components/app.ts");
/* harmony import */ var _ts_common_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ts/common/state */ "./ts/common/state.ts");
/* harmony import */ var _ts_api_data_controller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ts/api/data-controller */ "./ts/api/data-controller.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





const init = () => __awaiter(void 0, void 0, void 0, function* () {
    const categories = yield _ts_api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.getCategories();
    _ts_common_state__WEBPACK_IMPORTED_MODULE_3__.state.setCategories(categories);
    new _ts_components_app__WEBPACK_IMPORTED_MODULE_2__.App(document.body);
});
init();


/***/ }),

/***/ "./ts/api/auth-controller.ts":
/*!***********************************!*\
  !*** ./ts/api/auth-controller.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AuthController": () => (/* binding */ AuthController)
/* harmony export */ });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./ts/api/types.ts");
/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routes */ "./ts/api/routes.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class AuthController {
    static isAuthUser(login, password) {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const body = {
                    email: login,
                    password: password,
                };
                const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.login}`, {
                    method: 'POST',
                    body: JSON.stringify(body),
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (!response.ok) {
                    throw new Error(`${response.status}`);
                }
                const data = yield response.json();
                return data.user;
            }
            catch (err) {
                console.log(err);
            }
        });
    }
    static createNewUser(login, password, name) {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const user = {
                    email: login,
                    password: password,
                    name: name,
                    place: _types__WEBPACK_IMPORTED_MODULE_0__.Places.lessons,
                    done: { lessons: [], tests: [], tasks: [] },
                    favourites: {
                        lessons: [],
                        tests: [],
                        tasks: [],
                    },
                    avatar: '',
                    settings: {
                        theme: false,
                        animation: false,
                        resetProgress: false,
                        sound: true,
                        volume: 0.4,
                        isValid: false,
                    },
                };
                const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.register}`, {
                    method: 'POST',
                    body: JSON.stringify(user),
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (!response.ok) {
                    throw new Error(`${response.status}`);
                }
                const json = yield response.json();
                return json.user;
            }
            catch (error) {
                console.log(error);
            }
        });
    }
}


/***/ }),

/***/ "./ts/api/avatars-api.ts":
/*!*******************************!*\
  !*** ./ts/api/avatars-api.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getImages": () => (/* binding */ getImages)
/* harmony export */ });
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
const getImages = (page) => __awaiter(void 0, void 0, void 0, function* () {
    const avatars = [];
    const itemCount = 9;
    let intervalStart = page * itemCount;
    let intervalEnd = page * itemCount + itemCount;
    if (page === 1) {
        intervalStart = 1;
        intervalEnd = 10;
    }
    for (let i = intervalStart; i < intervalEnd; i++) {
        const image = `https://raw.githubusercontent.com/pain4metoo/words-data/master/avatars/${i}.jpg`;
        yield fetch(image).then((response) => avatars.push(response.url));
    }
    return avatars;
});


/***/ }),

/***/ "./ts/api/data-controller.ts":
/*!***********************************!*\
  !*** ./ts/api/data-controller.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DataController": () => (/* binding */ DataController)
/* harmony export */ });
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/state */ "./ts/common/state.ts");
/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routes */ "./ts/api/routes.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class DataController {
    static getCategories() {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.categories}`);
            const categories = yield response.json();
            return categories;
        });
    }
    static getLesson(id) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.lessons}/${id}`);
            const lesson = yield response.json();
            return lesson;
        });
    }
    static getTest(id) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.tests}/${id}`);
            const test = yield response.json();
            return test;
        });
    }
    static getTask(id) {
        return __awaiter(this, void 0, void 0, function* () {
            const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.tasks}/${id}`);
            const task = yield response.json();
            return task;
        });
    }
    static updateUserData() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const user = _common_state__WEBPACK_IMPORTED_MODULE_0__.state.getUser();
                const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.users}/${user.id}`, {
                    method: 'PATCH',
                    body: JSON.stringify(user),
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (!response.ok) {
                    throw new Error(`${response.status}`);
                }
            }
            catch (error) {
                console.log(error);
            }
        });
    }
    static updateLessonComments() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const lesson = _common_state__WEBPACK_IMPORTED_MODULE_0__.state.getLesson();
                const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.lessons}/${lesson.id}`, {
                    method: 'PATCH',
                    body: JSON.stringify(lesson),
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (response.ok) {
                    const lessonWithNewComment = yield this.getLesson(lesson.id);
                    _common_state__WEBPACK_IMPORTED_MODULE_0__.state.setLesson(lessonWithNewComment);
                    //state.setNewPage(PagesList.lessonPage);
                }
                else {
                    throw new Error(`${response.status}`);
                }
            }
            catch (error) {
                console.log(error);
            }
        });
    }
}


/***/ }),

/***/ "./ts/api/routes.ts":
/*!**************************!*\
  !*** ./ts/api/routes.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "baseUrl": () => (/* binding */ baseUrl),
/* harmony export */   "path": () => (/* binding */ path)
/* harmony export */ });
const baseUrl = 'http://localhost:3000'; //http://127.0.0.1:3000';
var path;
(function (path) {
    path["users"] = "/users";
    path["register"] = "/register";
    path["login"] = "/login";
    path["categories"] = "/category";
    path["lessons"] = "/lessons";
    path["tests"] = "/tests";
    path["tasks"] = "/tasks";
    path["comments"] = "/comments";
    path["settings"] = "/settings";
})(path || (path = {}));


/***/ }),

/***/ "./ts/api/settings-controller.ts":
/*!***************************************!*\
  !*** ./ts/api/settings-controller.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SettingsController": () => (/* binding */ SettingsController)
/* harmony export */ });
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/state */ "./ts/common/state.ts");
/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routes */ "./ts/api/routes.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class SettingsController {
    static setSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const user = _common_state__WEBPACK_IMPORTED_MODULE_0__.state.getUser();
                const response = yield fetch(`${_routes__WEBPACK_IMPORTED_MODULE_1__.baseUrl}${_routes__WEBPACK_IMPORTED_MODULE_1__.path.users}/${user.id}`, {
                    method: 'PATCH',
                    body: JSON.stringify(user),
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                if (!response.ok) {
                    throw new Error(`${response.status}`);
                }
            }
            catch (err) {
                console.log(err);
            }
        });
    }
}


/***/ }),

/***/ "./ts/api/types.ts":
/*!*************************!*\
  !*** ./ts/api/types.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Places": () => (/* binding */ Places),
/* harmony export */   "SettingsItems": () => (/* binding */ SettingsItems)
/* harmony export */ });
var Places;
(function (Places) {
    Places["lessons"] = "lessons";
    Places["tests"] = "tests";
    Places["tasks"] = "tasks";
})(Places || (Places = {}));
var SettingsItems;
(function (SettingsItems) {
    SettingsItems["theme"] = "theme";
    SettingsItems["animation"] = "animation";
    SettingsItems["resetProgress"] = "resetProgress";
    SettingsItems["sound"] = "sound";
    SettingsItems["volume"] = "volume";
})(SettingsItems || (SettingsItems = {}));


/***/ }),

/***/ "./ts/common/control.ts":
/*!******************************!*\
  !*** ./ts/common/control.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
class Control {
    constructor(parentNode, tagName = 'div', className = '', content = '') {
        const el = document.createElement(tagName);
        el.className = className;
        el.textContent = content;
        if (parentNode) {
            parentNode.append(el);
        }
        this.node = el;
    }
    destroy() {
        this.node.remove();
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Control);


/***/ }),

/***/ "./ts/common/signal.ts":
/*!*****************************!*\
  !*** ./ts/common/signal.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
class Signal {
    constructor() {
        this.listeners = [];
    }
    add(listener) {
        this.listeners.push(listener);
    }
    remove(listener) {
        this.listeners = this.listeners.filter((elem) => elem !== listener);
    }
    emit(params) {
        this.listeners.forEach((listener) => listener(params));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Signal);


/***/ }),

/***/ "./ts/common/state-types.ts":
/*!**********************************!*\
  !*** ./ts/common/state-types.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StateOptions": () => (/* binding */ StateOptions)
/* harmony export */ });
var StateOptions;
(function (StateOptions) {
    StateOptions["changePage"] = "change-page";
    StateOptions["changeTheme"] = "change-theme";
    StateOptions["changeAnimation"] = "change-animation";
    StateOptions["changeProgress"] = "change-progress";
    StateOptions["changeSound"] = "change-sound";
    StateOptions["changeVolume"] = "change-volume";
    StateOptions["onLogUser"] = "onlogin-user";
    StateOptions["changePassword"] = "change-password";
    StateOptions["resetSettings"] = "reset-settings";
    StateOptions["saveSettings"] = "save-settings";
    StateOptions["changeName"] = "change-name";
    StateOptions["validLogin"] = "valid-login";
    StateOptions["validReg"] = "valid-reg";
    StateOptions["avatarsPage"] = "avatars-page";
    StateOptions["changeAvatar"] = "change-avatar";
    StateOptions["statusLoader"] = "statis-loader";
})(StateOptions || (StateOptions = {}));


/***/ }),

/***/ "./ts/common/state.ts":
/*!****************************!*\
  !*** ./ts/common/state.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "state": () => (/* binding */ state)
/* harmony export */ });
/* harmony import */ var _api_settings_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/settings-controller */ "./ts/api/settings-controller.ts");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/types */ "./ts/api/types.ts");
/* harmony import */ var _components_main_main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/main/main */ "./ts/components/main/main.ts");
/* harmony import */ var _signal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./signal */ "./ts/common/signal.ts");
/* harmony import */ var _state_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _assets_sound_click_mp3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../assets/sound/click.mp3 */ "./assets/sound/click.mp3");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







class State {
    constructor(initialState) {
        this.onUpdate = new _signal__WEBPACK_IMPORTED_MODULE_4__["default"]();
        this._data = initialState;
    }
    setNewPage(page, id) {
        if (page === _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.logout) {
            this._data.isAuth = false;
        }
        this._data.currentPage = { name: page, id };
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changePage);
        this.playSound();
    }
    authUser() {
        this._data.currentPage = { name: _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage };
        this._data.isAuth = true;
    }
    setUserData(userData) {
        this._data.user = userData;
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeTheme);
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeAnimation);
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeProgress);
    }
    setCategories(categories) {
        categories.forEach((category) => {
            const lessons = [];
            category.lessons.forEach((el) => {
                lessons.push({
                    id: +el.id,
                    name: el.name,
                });
            });
            this._data.categories.lessons.push({
                name: category.name,
                items: lessons,
            });
            const tests = [];
            category.tests.forEach((el) => {
                tests.push({
                    id: +el.id,
                    name: el.name,
                });
            });
            this._data.categories.tests.push({
                name: category.name,
                items: tests,
            });
            const tasks = [];
            category.tasks.forEach((el) => {
                tasks.push({
                    id: +el.id,
                    name: el.name,
                });
            });
            this._data.categories.tasks.push({
                name: category.name,
                items: tasks,
            });
        });
    }
    setLesson(lesson) {
        this._data.lesson = lesson;
    }
    setTest(test) {
        this._data.test = test;
    }
    setTask(task) {
        this._data.task = task;
    }
    setTheme(theme) {
        return __awaiter(this, void 0, void 0, function* () {
            this.playSound();
            this._data.user.settings[_api_types__WEBPACK_IMPORTED_MODULE_2__.SettingsItems.theme] = theme;
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeTheme);
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeAnimation);
        });
    }
    setAnimation(animation) {
        return __awaiter(this, void 0, void 0, function* () {
            this.playSound();
            this._data.user.settings[_api_types__WEBPACK_IMPORTED_MODULE_2__.SettingsItems.animation] = animation;
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeAnimation);
        });
    }
    setProgress(progress) {
        return __awaiter(this, void 0, void 0, function* () {
            this.playSound();
            this._data.user.settings[_api_types__WEBPACK_IMPORTED_MODULE_2__.SettingsItems.resetProgress] = progress;
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeProgress);
        });
    }
    setSound(sound) {
        return __awaiter(this, void 0, void 0, function* () {
            this._data.user.settings[_api_types__WEBPACK_IMPORTED_MODULE_2__.SettingsItems.sound] = sound;
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeSound);
        });
    }
    setVolume(volume) {
        return __awaiter(this, void 0, void 0, function* () {
            this._data.user.settings[_api_types__WEBPACK_IMPORTED_MODULE_2__.SettingsItems.volume] = volume;
            this.playSound();
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeVolume);
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.playSound();
            this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.saveSettings);
            yield _api_settings_controller__WEBPACK_IMPORTED_MODULE_0__.SettingsController.setSettings();
            if (this._data.user.settings.resetProgress) {
                this._data.user.done = {
                    lessons: [],
                    tests: [],
                    tasks: [],
                };
                this._data.user.settings.resetProgress = false;
                yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
            }
        });
    }
    setPassword(currentPassword) {
        this._data.user.password = currentPassword;
    }
    setNewPassword(newPassword, oldPassword) {
        if (oldPassword === this._data.user.password && newPassword.length > 3) {
            this._data.user.password = newPassword;
            this._data.user.settings.isValid = true;
        }
        else {
            this._data.user.settings.isValid = false;
        }
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changePassword);
    }
    resetSettings() {
        this.playSound();
        this.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.resetSettings);
    }
    setUserName(name) {
        return __awaiter(this, void 0, void 0, function* () {
            this._data.user.name = name;
            yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
            state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeName);
        });
    }
    setLoginValid(status) {
        this._data.validLogin = status;
        state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.validLogin);
    }
    getLoginValid() {
        return this._data.validLogin;
    }
    setRegValid(status) {
        this._data.validReg = status;
        state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.validReg);
    }
    setLoader(status) {
        this._data.avatarsMenu.loader = status;
        state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.statusLoader);
    }
    getLoaderStatus() {
        return this._data.avatarsMenu.loader;
    }
    getRegValid() {
        return this._data.validReg;
    }
    setCurrentAvatarsPage(page) {
        this._data.avatarsMenu.currentPage = page;
        state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.avatarsPage);
    }
    getCurrentAvatarsPage() {
        return this._data.avatarsMenu.currentPage;
    }
    getMaxAvatarsPages() {
        return this._data.avatarsMenu.maxPage;
    }
    setNewAvatar(url) {
        return __awaiter(this, void 0, void 0, function* () {
            this._data.user.avatar = url;
            yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
            state.onUpdate.emit(_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.changeAvatar);
        });
    }
    getUrlAvatar() {
        return this._data.user.avatar;
    }
    getAnim() {
        return this._data.user.settings.animation;
    }
    getCurrentName() {
        return this._data.user.name;
    }
    getPasswordValidate() {
        return this._data.user.settings.isValid;
    }
    getCurrentPage() {
        return this._data.currentPage;
    }
    getHeaderPages() {
        return this._data.header;
    }
    getCategories(key) {
        return this._data.categories[key];
    }
    getLesson() {
        return this._data.lesson;
    }
    getTest() {
        return this._data.test;
    }
    getTask() {
        return this._data.task;
    }
    getAuthUser() {
        return this._data.isAuth;
    }
    getUser() {
        return this._data.user;
    }
    getSettings() {
        return this._data.user.settings;
    }
    playSound() {
        const settings = this.getSettings();
        if (settings.sound) {
            const audio = new Audio(_assets_sound_click_mp3__WEBPACK_IMPORTED_MODULE_6__);
            audio.volume = settings.volume;
            audio.play();
            audio.remove();
        }
    }
}
const initialState = {
    isAuth: false,
    user: {
        id: 0,
        email: '',
        password: '',
        name: '',
        done: {
            lessons: [],
            tests: [],
            tasks: [],
        },
        avatar: '',
        place: _api_types__WEBPACK_IMPORTED_MODULE_2__.Places.lessons,
        favourites: {
            lessons: [],
            tests: [],
            tasks: [],
        },
        settings: {
            theme: false,
            animation: false,
            resetProgress: false,
            sound: true,
            volume: 0.4,
            isValid: false,
        },
    },
    avatarsMenu: {
        currentPage: 1,
        maxPage: 56,
        loader: false,
    },
    validLogin: false,
    validReg: false,
    currentPage: { name: _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage },
    header: {
        mainPages: [_components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonsPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testsPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.tasksPage],
        authPages: [_components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.favorPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.statistPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.setPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.logout],
        unAuthPages: [_components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.authPage, _components_main_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.unauthPage],
    },
    categories: {
        lessons: [],
        tests: [],
        tasks: [],
    },
    lesson: {
        category: '',
        id: 0,
        name: '',
        content: [],
        comments: [],
    },
    test: {
        category: '',
        id: 0,
        name: '',
        questions: [],
    },
    task: {
        category: '',
        id: 0,
        name: '',
        list: [],
    },
};
const state = new State(initialState);


/***/ }),

/***/ "./ts/components/animation/animation-dark.ts":
/*!***************************************************!*\
  !*** ./ts/components/animation/animation-dark.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationDark": () => (/* binding */ AnimationDark)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _animation_dark_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animation-dark.scss */ "./ts/components/animation/animation-dark.scss");




class AnimationDark extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'start');
        const normStart = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div');
        normStart.node.setAttribute('id', 'normalstar');
        const start = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div');
        start.node.setAttribute('id', 'star');
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeAnimation:
                    this.toggleAnimation(start.node);
                    break;
            }
        });
    }
    toggleAnimation(node) {
        const settings = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getSettings();
        if (settings.animation) {
            node.style.animation = 'none';
        }
        else {
            node.style.animation = 'animStar 60s linear infinite';
        }
    }
}


/***/ }),

/***/ "./ts/components/animation/animation-light.ts":
/*!****************************************************!*\
  !*** ./ts/components/animation/animation-light.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationLight": () => (/* binding */ AnimationLight)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _animation_light_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animation-light.scss */ "./ts/components/animation/animation-light.scss");




class AnimationLight extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'intro');
        this.toggleAnimation();
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeAnimation:
                    this.toggleAnimation();
                    break;
            }
        });
    }
    toggleAnimation() {
        const settings = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getSettings();
        if (settings.animation) {
            this.node.style.animation = 'none';
        }
        else {
            this.node.style.animation = 'hue-rotate 3s linear infinite';
        }
    }
}


/***/ }),

/***/ "./ts/components/app.ts":
/*!******************************!*\
  !*** ./ts/components/app.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "App": () => (/* binding */ App)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _animation_animation_dark__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animation/animation-dark */ "./ts/components/animation/animation-dark.ts");
/* harmony import */ var _animation_animation_light__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./animation/animation-light */ "./ts/components/animation/animation-light.ts");
/* harmony import */ var _footer_footer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./footer/footer */ "./ts/components/footer/footer.ts");
/* harmony import */ var _header_header__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./header/header */ "./ts/components/header/header.ts");
/* harmony import */ var _main_main__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./main/main */ "./ts/components/main/main.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








class App extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'wrapper');
        new _header_header__WEBPACK_IMPORTED_MODULE_6__.Header(this.node);
        new _main_main__WEBPACK_IMPORTED_MODULE_7__.Main(this.node);
        new _footer_footer__WEBPACK_IMPORTED_MODULE_5__.Footer(this.node);
        this.createAnimation();
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeTheme:
                    this.createAnimation();
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.onLogUser:
                    this.createAnimation();
                    break;
            }
        });
    }
    createAnimation() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.animDark) {
                this.animDark.destroy();
            }
            if (this.animLight) {
                this.animLight.destroy();
            }
            const settings = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getSettings();
            if (settings.theme) {
                this.animLight = new _animation_animation_light__WEBPACK_IMPORTED_MODULE_4__.AnimationLight(document.body);
                this.node.style.color = 'black';
            }
            else {
                this.animDark = new _animation_animation_dark__WEBPACK_IMPORTED_MODULE_3__.AnimationDark(document.body);
                this.node.style.color = 'white';
            }
        });
    }
}


/***/ }),

/***/ "./ts/components/footer/footer.ts":
/*!****************************************!*\
  !*** ./ts/components/footer/footer.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Footer": () => (/* binding */ Footer)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _footer_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./footer.scss */ "./ts/components/footer/footer.scss");
/* harmony import */ var _assets_image_footer_logo_png__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../assets/image/footer-logo.png */ "./assets/image/footer-logo.png");



class Footer extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'footer', 'footer container');
        const logoLink = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'a');
        logoLink.node.href = 'https://rs.school/';
        logoLink.node.setAttribute('target', 'blank');
        const rssSchool = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](logoLink.node, 'img', 'footer_logo');
        rssSchool.node.src = _assets_image_footer_logo_png__WEBPACK_IMPORTED_MODULE_2__;
        rssSchool.node.alt = 'footer logo';
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'p', 'footer_year', '2023');
        const footer_dev = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'footer_dev');
        const devZhenya = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](footer_dev.node, 'a', 'footer_link link', 'pain4metoo');
        devZhenya.node.href = 'https://github.com/pain4metoo';
        devZhenya.node.setAttribute('target', 'blank');
        const devTanya = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](footer_dev.node, 'a', 'footer_link link', 'Tati-Zhurr');
        devTanya.node.href = 'https://github.com/Tati-Zhurr';
        devTanya.node.setAttribute('target', 'blank');
        const devZhenya1 = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](footer_dev.node, 'a', 'footer_link link', 'Evermishka');
        devZhenya1.node.href = 'https://github.com/Evermishka';
        devZhenya1.node.setAttribute('target', 'blank');
    }
}


/***/ }),

/***/ "./ts/components/header/header-auth/header-auth.ts":
/*!*********************************************************!*\
  !*** ./ts/components/header/header-auth/header-auth.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HeaderAuth": () => (/* binding */ HeaderAuth)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");


class HeaderAuth extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'ul', 'navbar-nav list-group');
        const listArr = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getHeaderPages().authPages;
        listArr.forEach((page) => {
            const listItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'li', 'nav_item text-center');
            const linkItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](listItem.node, 'a', 'list-group-item list-group-item-action');
            linkItem.node.onclick = () => this.changeMainPages(page);
            linkItem.node.href = '#';
            linkItem.node.textContent = page;
        });
    }
    changeMainPages(page) {
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setNewPage(page);
    }
}


/***/ }),

/***/ "./ts/components/header/header-unauth/header-unauth.ts":
/*!*************************************************************!*\
  !*** ./ts/components/header/header-unauth/header-unauth.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HeaderUnauth": () => (/* binding */ HeaderUnauth)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");


class HeaderUnauth extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'ul', 'navbar-nav list-group');
        const listArr = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getHeaderPages().unAuthPages;
        listArr.forEach((page) => {
            const listItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'li', 'list-group');
            const linkItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](listItem.node, 'a', 'list-group-item list-group-item-action text-center');
            linkItem.node.onclick = () => this.changeMainPages(page);
            linkItem.node.href = '#';
            linkItem.node.textContent = page;
        });
    }
    changeMainPages(page) {
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setNewPage(page);
    }
}


/***/ }),

/***/ "./ts/components/header/header.ts":
/*!****************************************!*\
  !*** ./ts/components/header/header.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Header": () => (/* binding */ Header)
/* harmony export */ });
/* harmony import */ var _header_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./header.scss */ "./ts/components/header/header.scss");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _assets_svg_logo_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../assets/svg/logo.svg */ "./assets/svg/logo.svg");
/* harmony import */ var _nav_menu_nav_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nav-menu/nav-menu */ "./ts/components/header/nav-menu/nav-menu.ts");
/* harmony import */ var _header_unauth_header_unauth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./header-unauth/header-unauth */ "./ts/components/header/header-unauth/header-unauth.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main_main__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../main/main */ "./ts/components/main/main.ts");
/* harmony import */ var _header_auth_header_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./header-auth/header-auth */ "./ts/components/header/header-auth/header-auth.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/state-types */ "./ts/common/state-types.ts");









class Header extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'header', 'header container');
        const navigation = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'nav', 'navbar navbar-expand-md navbar-light');
        const container = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](navigation.node, 'div', 'container-fluid justify-content-between');
        const logoLink = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](container.node, 'a', 'navbar-brand flex-grow-1');
        logoLink.node.href = '#';
        logoLink.node.onclick = () => this.onMainPage();
        const logoImg = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](logoLink.node, 'img', 'navbar-brand');
        logoImg.node.src = _assets_svg_logo_svg__WEBPACK_IMPORTED_MODULE_2__;
        logoImg.node.alt = 'logo javascript';
        logoImg.node.height = 60;
        const navbarToggler = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](container.node, 'button', 'navbar-toggler');
        navbarToggler.node.type = 'button';
        navbarToggler.node.setAttribute('data-bs-toggle', 'collapse');
        navbarToggler.node.setAttribute('data-bs-target', '#navbarNav');
        navbarToggler.node.setAttribute('aria-controls', 'navbarNav');
        navbarToggler.node.setAttribute('aria-expanded', 'false');
        navbarToggler.node.setAttribute('aria-label', 'Переключатель навигации');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](navbarToggler.node, 'span', 'navbar-toggler-icon');
        const collapse = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](container.node, 'div', 'collapse navbar-collapse justify-content-between');
        collapse.node.id = 'navbarNav';
        new _nav_menu_nav_menu__WEBPACK_IMPORTED_MODULE_3__.NavBar(collapse.node);
        this.createAuthUnauthHeader(collapse);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.onUpdate.add((type) => {
            if (type === _common_state_types__WEBPACK_IMPORTED_MODULE_8__.StateOptions.changePage) {
                this.createAuthUnauthHeader(collapse);
            }
        });
    }
    createAuthUnauthHeader(parentNode) {
        if (this.headerAuth) {
            this.headerAuth.destroy();
        }
        if (this.headerUnauth) {
            this.headerUnauth.destroy();
        }
        if (_common_state__WEBPACK_IMPORTED_MODULE_5__.state.getAuthUser()) {
            this.headerAuth = new _header_auth_header_auth__WEBPACK_IMPORTED_MODULE_7__.HeaderAuth(parentNode.node);
        }
        else {
            this.headerUnauth = new _header_unauth_header_unauth__WEBPACK_IMPORTED_MODULE_4__.HeaderUnauth(parentNode.node);
        }
    }
    onMainPage() {
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setNewPage(_main_main__WEBPACK_IMPORTED_MODULE_6__.PagesList.mainPage);
    }
}


/***/ }),

/***/ "./ts/components/header/nav-menu/nav-menu.ts":
/*!***************************************************!*\
  !*** ./ts/components/header/nav-menu/nav-menu.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NavBar": () => (/* binding */ NavBar)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _nav_menu_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nav-menu.scss */ "./ts/components/header/nav-menu/nav-menu.scss");



class NavBar extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'ul', 'navbar-nav');
        const listArr = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getHeaderPages().mainPages;
        listArr.forEach((page) => {
            const listItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'li', 'nav_item');
            const linkItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](listItem.node, 'a', 'nav-link');
            linkItem.node.onclick = () => this.changeMainPages(page);
            linkItem.node.href = '#';
            linkItem.node.textContent = page;
        });
    }
    changeMainPages(page) {
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setNewPage(page);
    }
}


/***/ }),

/***/ "./ts/components/main/auth-page/auth-page.ts":
/*!***************************************************!*\
  !*** ./ts/components/main/auth-page/auth-page.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AuthPage": () => (/* binding */ AuthPage)
/* harmony export */ });
/* harmony import */ var _api_auth_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/auth-controller */ "./ts/api/auth-controller.ts");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/types */ "./ts/api/types.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
/* harmony import */ var _auth_page_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./auth-page.scss */ "./ts/components/main/auth-page/auth-page.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








class AuthPage extends _common_control__WEBPACK_IMPORTED_MODULE_3__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'form container w-auto p-3');
        const form = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'form');
        const emailInner = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](form.node, 'div', 'mb-3');
        const emailLabel = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](emailInner.node, 'label', 'form-label', 'Почта');
        emailLabel.node.setAttribute('for', 'inputEmail');
        const emailInput = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](emailInner.node, 'input', 'form-control');
        emailInner.node.id = 'inputEmail';
        emailInput.node.type = 'email';
        emailInput.node.setAttribute('aria-describedby', 'emailHelp');
        const inputText = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](emailInner.node, 'div', 'form-text text-warning', 'Мы никогда не будем делиться вашей электронной почтой с кем-либо еще');
        const passInner = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](form.node, 'div', 'mb-3');
        const passLabel = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](passInner.node, 'label', 'form-label', 'Пароль');
        passLabel.node.setAttribute('for', 'InputPassword');
        const passInput = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](passInner.node, 'input', 'form-control');
        passInput.node.id = 'InputPassword';
        passInput.node.type = 'password';
        passInput.node.autocomplete = 'off';
        const onLogBtn = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'button', 'btn btn-primary btn-lg', 'Войти');
        onLogBtn.node.type = 'button';
        onLogBtn.node.onclick = () => this.isAuthUser(emailInput.node.value, passInput.node.value);
        _common_state__WEBPACK_IMPORTED_MODULE_4__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_5__.StateOptions.validLogin:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_4__.state.getLoginValid()) {
                        emailInput.node.classList.add('is-valid');
                        passInput.node.classList.add('is-valid');
                        emailInput.node.classList.remove('is-invalid');
                        passInput.node.classList.remove('is-invalid');
                        inputText.node.textContent = 'Мы никогда не будем делиться вашей электронной почтой с кем-либо еще';
                        inputText.node.classList.add('text-warning');
                        inputText.node.classList.remove('text-danger');
                    }
                    else {
                        emailInput.node.classList.add('is-invalid');
                        emailInput.node.classList.remove('is-valid');
                        passInput.node.classList.add('is-invalid');
                        passInput.node.classList.remove('is-valid');
                        inputText.node.textContent = 'Неверный логин или пароль!';
                        inputText.node.classList.add('text-danger');
                        inputText.node.classList.remove('text-warning');
                    }
                    break;
            }
        });
    }
    isAuthUser(login, password) {
        return __awaiter(this, void 0, void 0, function* () {
            const user = yield _api_auth_controller__WEBPACK_IMPORTED_MODULE_0__.AuthController.isAuthUser(login, password);
            if (user) {
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setLoginValid(true);
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.authUser();
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setUserData(user);
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setPassword(password);
                this.switchPage(user);
            }
            else {
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setLoginValid(false);
            }
        });
    }
    switchPage(user) {
        return __awaiter(this, void 0, void 0, function* () {
            const page = user.place;
            let currentPageId = 0;
            if (user.done[page].length === 0) {
                _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_6__.PagesList.mainPage);
                return;
            }
            else {
                currentPageId = user.done[page].reverse()[0].id;
            }
            let data;
            switch (page) {
                case _api_types__WEBPACK_IMPORTED_MODULE_2__.Places.lessons:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getLesson(currentPageId);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setLesson(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_6__.PagesList.lessonPage);
                    break;
                case _api_types__WEBPACK_IMPORTED_MODULE_2__.Places.tests:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getTest(currentPageId);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setTest(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_6__.PagesList.testPage);
                    break;
                case _api_types__WEBPACK_IMPORTED_MODULE_2__.Places.tasks:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getTask(currentPageId);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setTask(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_6__.PagesList.taskPage);
                    break;
            }
        });
    }
}


/***/ }),

/***/ "./ts/components/main/categories-page/categories-page.ts":
/*!***************************************************************!*\
  !*** ./ts/components/main/categories-page/categories-page.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CategoriesPage": () => (/* binding */ CategoriesPage)
/* harmony export */ });
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class CategoriesPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode, type) {
        super(parentNode, 'div', 'container py-5');
        const accordion = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'accordion');
        accordion.node.id = 'accordionExample';
        this.renderCategoriesList(type, accordion.node);
    }
    renderCategoriesList(type, parent) {
        const isAuth = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser();
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getCategories(type).forEach((category, index) => {
            const accordionItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](parent, 'div', 'accordion-item');
            const accordionHeader = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionItem.node, 'h2', 'accordion-header');
            accordionHeader.node.id = `heading-${index}`;
            const accordionButton = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionHeader.node, 'button', 'accordion-button fs-2', category.name);
            accordionButton.node.type = 'button';
            accordionButton.node.setAttribute('data-bs-toggle', 'collapse');
            accordionButton.node.setAttribute('data-bs-target', `#collapse-${index}`);
            accordionButton.node.setAttribute('aria-expanded', 'true');
            accordionButton.node.setAttribute('aria-controls', `collapse-${index}`);
            accordionButton.node.addEventListener('click', () => _common_state__WEBPACK_IMPORTED_MODULE_2__.state.playSound());
            if (isAuth) {
                const progressValue = this.getProgressValue(category.items, type);
                const progress = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionHeader.node, 'div', 'progress');
                const progressBar = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](progress.node, 'div', 'progress-bar progress-bar-striped progress-bar-animated', `${progressValue}%`);
                progressBar.node.setAttribute('role', 'progressbar');
                progressBar.node.setAttribute('style', `width: ${progressValue}%`);
                progressBar.node.setAttribute('aria-valuenow', `${progressValue}`);
                progressBar.node.setAttribute('aria-valuemin', '0');
                progressBar.node.setAttribute('aria-valuemax', '100');
            }
            const accordionCollapse = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionItem.node, 'div', 'accordion-collapse collapse');
            accordionCollapse.node.id = `collapse-${index}`;
            accordionCollapse.node.setAttribute('aria-labelledby', `heading-${index}`);
            accordionCollapse.node.setAttribute('data-bs-parent', `#accordionExample`);
            const accordionBody = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionCollapse.node, 'div', 'accordion-body d-flex flex-column');
            category.items.forEach((item) => {
                const categoryItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](accordionBody.node, 'a', 'link-primary d-flex align-items-center', item.name);
                if (isAuth && this.isItemDone(item, type)) {
                    categoryItem.node.classList.add('link-secondary');
                    categoryItem.node.innerHTML += `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle ms-1" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
          <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
        </svg>`;
                }
                categoryItem.node.href = '#';
                categoryItem.node.onclick = () => this.switchPage(type, item.id);
            });
        });
    }
    switchPage(type, id) {
        return __awaiter(this, void 0, void 0, function* () {
            let data;
            switch (type) {
                case 'lessons':
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getLesson(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLesson(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage);
                    break;
                case 'tests':
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getTest(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTest(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage);
                    break;
                case 'tasks':
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getTask(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTask(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage);
                    break;
                default:
                    break;
            }
        });
    }
    getProgressValue(items, type) {
        const allItemsCount = items.length;
        const doneItems = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser().done[type];
        let doneItemsCount = 0;
        items.forEach((item) => {
            doneItems.forEach((doneItem) => {
                if (item.id === +doneItem.id) {
                    doneItemsCount += 1;
                }
            });
        });
        return doneItemsCount ? Math.round((doneItemsCount / allItemsCount) * 100) : 0;
    }
    isItemDone(item, type) {
        const doneItems = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser().done[type];
        const result = doneItems.find((doneItem) => item.id === +doneItem.id);
        return result ? true : false;
    }
}


/***/ }),

/***/ "./ts/components/main/favor-page/favor-page.ts":
/*!*****************************************************!*\
  !*** ./ts/components/main/favor-page/favor-page.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FavorPage": () => (/* binding */ FavorPage)
/* harmony export */ });
/* harmony import */ var _favor_page_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./favor-page.scss */ "./ts/components/main/favor-page/favor-page.scss");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class FavorPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container py-5');
        const favourites = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser().favourites;
        const favouritesListGroup = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'ul', 'list-group');
        const favouritesLessons = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](favouritesListGroup.node, 'li', 'list-group-item fs-2 py-3', 'Уроки');
        const favouritesTests = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](favouritesListGroup.node, 'li', 'list-group-item fs-2 py-3', 'Тесты');
        const favouritesTasks = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](favouritesListGroup.node, 'li', 'list-group-item fs-2 py-3', 'Задачи');
        this.renderItems(favouritesLessons.node, favourites.lessons, 'lessons');
        this.renderItems(favouritesTests.node, favourites.tests, 'tests');
        this.renderItems(favouritesTasks.node, favourites.tasks, 'tasks');
    }
    renderItems(parent, items, type) {
        const list = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](parent, 'ul', 'list-group list-group-item-light mt-3');
        items.forEach((item) => __awaiter(this, void 0, void 0, function* () {
            const itemWrapper = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](list.node, 'li', 'list-group-item fs-4 d-flex justify-content-between');
            const data = yield this.getData(type, item.id);
            if (data) {
                const itemName = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](itemWrapper.node, 'a', '', data.name);
                itemName.node.href = '#';
                itemName.node.onclick = () => this.switchPage(type, data);
            }
            const iconMark = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](itemWrapper.node, 'i');
            const fillBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill" viewBox="0 0 16 16">
      <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/>
      </svg>`;
            iconMark.node.classList.add('bi-bookmark-fill');
            iconMark.node.setAttribute('title', 'Remove from favourites');
            iconMark.node.innerHTML = fillBookMarkImg;
            iconMark.node.onclick = () => {
                itemWrapper.destroy();
                this.removeItemFromFavourites(type, item.id);
            };
        }));
    }
    getData(type, id) {
        return __awaiter(this, void 0, void 0, function* () {
            switch (type) {
                case 'lessons':
                    return yield _api_data_controller__WEBPACK_IMPORTED_MODULE_3__.DataController.getLesson(id);
                case 'tests':
                    return yield _api_data_controller__WEBPACK_IMPORTED_MODULE_3__.DataController.getTest(id);
                case 'tasks':
                    return yield _api_data_controller__WEBPACK_IMPORTED_MODULE_3__.DataController.getTask(id);
                default:
                    break;
            }
        });
    }
    switchPage(type, data) {
        switch (type) {
            case 'lessons':
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLesson(data);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_4__.PagesList.lessonPage);
                break;
            case 'tests':
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTest(data);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_4__.PagesList.testPage);
                break;
            case 'tasks':
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTask(data);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_4__.PagesList.taskPage);
                break;
            default:
                break;
        }
    }
    removeItemFromFavourites(type, id) {
        const user = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser();
        user.favourites[type] = user.favourites[type].filter((e) => e.id !== id);
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
        _api_data_controller__WEBPACK_IMPORTED_MODULE_3__.DataController.updateUserData();
    }
}


/***/ }),

/***/ "./ts/components/main/lesson-page/lesson-page.ts":
/*!*******************************************************!*\
  !*** ./ts/components/main/lesson-page/lesson-page.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LessonPage": () => (/* binding */ LessonPage)
/* harmony export */ });
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/types */ "./ts/api/types.ts");
/* harmony import */ var _assets_svg_avatar_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../assets/svg/avatar.svg */ "./assets/svg/avatar.svg");
/* harmony import */ var _lesson_page_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lesson-page.scss */ "./ts/components/main/lesson-page/lesson-page.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







class LessonPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container py-5 lesson');
        window.scrollTo(0, 0);
        const lesson = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getLesson();
        const lessonId = lesson.id;
        const lessonName = lesson.name;
        const lessonCategory = lesson.category;
        const lessonContent = lesson.content.join(`\n`);
        const user = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser();
        const firstLessonId = 1;
        const lastLessonId = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getCategories(_api_types__WEBPACK_IMPORTED_MODULE_4__.Places.lessons)
            .map((e) => e.items)
            .reverse()[0]
            .slice(-1)[0].id;
        const breadcrumbs = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'nav', 'breadcrumbs');
        breadcrumbs.node.setAttribute('style', '--bs-breadcrumb-divider: ">";');
        breadcrumbs.node.setAttribute('aria-label', 'breadcrumb');
        const breadcrumbsList = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbs.node, 'ol', 'breadcrumb');
        const breadcrumbsItemsNames = ['Главная', 'Уроки', `${lessonCategory}: ${lessonName}`];
        breadcrumbsItemsNames.forEach((e, i) => {
            if (i !== breadcrumbsItemsNames.length - 1) {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item pe-auto fs-5');
                const breadcrumbsItemLink = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsItem.node, 'a', '', e);
                breadcrumbsItemLink.node.setAttribute('href', '#');
                breadcrumbsItem.node.onclick = () => this.switchPage(e, lessonId);
            }
            else {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item active fs-5', e);
                breadcrumbsItem.node.setAttribute('aria-current', 'page');
            }
        });
        const headingContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'container d-flex flex-row');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'h1', 'fw-bold mb-4', lessonName);
        if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
            if (this.isLessonDone(lessonId, user)) {
                const iconDone = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'i', 'bi bi-check-square-fill');
                iconDone.node.setAttribute('title', 'Done');
                iconDone.node.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
      </svg>`;
            }
            const iconMark = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'i');
            const emptyBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">
      <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
    </svg>`;
            const fillBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill" viewBox="0 0 16 16">
    <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/>
  </svg>`;
            if (this.isLessonInFavourites(lessonId, user)) {
                iconMark.node.classList.add('bi-bookmark-fill');
                iconMark.node.setAttribute('title', 'Remove from favourites');
                iconMark.node.innerHTML = fillBookMarkImg;
            }
            else {
                iconMark.node.classList.add('bi-bookmark');
                iconMark.node.setAttribute('title', 'Add to favourites');
                iconMark.node.innerHTML = emptyBookMarkImg;
            }
            iconMark.node.onclick = () => {
                iconMark.node.classList.toggle('bi-bookmark');
                iconMark.node.classList.toggle('bi-bookmark-fill');
                if (iconMark.node.classList.contains('bi-bookmark-fill')) {
                    iconMark.node.innerHTML = fillBookMarkImg;
                    iconMark.node.setAttribute('title', 'Remove from favourites');
                    this.addLessonToFavourites(lessonId, user);
                }
                else {
                    iconMark.node.innerHTML = emptyBookMarkImg;
                    iconMark.node.setAttribute('title', 'Add to favourites');
                    this.removeLessonFromFavourites(lessonId, user);
                }
            };
        }
        const content = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'container mb-5');
        content.node.innerHTML = `${lessonContent}`;
        const buttonsTestsTasksContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'd-grid gap-2 col-2 mx-auto mb-5');
        const buttonTest = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsTestsTasksContainer.node, 'button', 'btn btn-primary', 'Пройти тест');
        buttonTest.node.type = 'button';
        buttonTest.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage, lessonId);
            if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
                this.addLessonToDone(lessonId, user);
            }
        };
        const buttonTask = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsTestsTasksContainer.node, 'button', 'btn btn-primary', 'Решить задачи');
        buttonTask.node.type = 'button';
        buttonTask.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage, lessonId);
            if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
                this.addLessonToDone(lessonId, user);
            }
        };
        const buttonsPrevNextContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'd-flex justify-content-sm-around mb-5');
        const buttonPrev = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к предыдущему уроку');
        buttonPrev.node.type = 'button';
        if (lessonId === firstLessonId) {
            buttonPrev.node.classList.add('disabled');
        }
        else {
            buttonPrev.node.classList.remove('disabled');
            buttonPrev.node.onclick = () => this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage, lessonId - 1);
        }
        const buttonNext = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к следующему уроку');
        buttonNext.node.type = 'button';
        if (lessonId === lastLessonId) {
            buttonNext.node.classList.add('disabled');
        }
        buttonNext.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage, lessonId + 1);
            if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
                this.addLessonToDone(lessonId, user);
            }
        };
        if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
            const commentsForm = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'mb-5');
            const labelComments = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](commentsForm.node, 'label', 'form-label mb-3', 'Комментарии');
            labelComments.node.setAttribute('for', 'commentForm');
            const textarea = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](commentsForm.node, 'textarea', 'form-control');
            textarea.node.setAttribute('id', 'commentForm');
            textarea.node.setAttribute('rows', '3');
            textarea.node.setAttribute('placeholder', 'Type your comment here');
            const submitButton = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](commentsForm.node, 'button', 'btn btn-success disabled', 'Опубликовать');
            textarea.node.oninput = () => submitButton.node.classList.remove('disabled');
            submitButton.node.onclick = () => __awaiter(this, void 0, void 0, function* () {
                this.addComment(lesson, textarea.node.value, user.name);
                textarea.node.value = '';
                submitButton.node.classList.add('disabled');
                this.renderCommentBlock(user, commentsPosted);
            });
        }
        const commentsPosted = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'container');
        this.renderCommentBlock(user, commentsPosted);
        const buttonUp = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn btn-outline-info position-fixed bottom-0 end-0 mx-3 my-3', '↑');
        buttonUp.node.onclick = () => window.scrollTo(0, 0);
        const buttonDown = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn btn-outline-info position-fixed top-0 end-0 mx-3 my-3', '↓');
        buttonDown.node.onclick = () => window.scrollTo(0, document.body.scrollHeight);
    }
    switchPage(page, id) {
        return __awaiter(this, void 0, void 0, function* () {
            let data;
            switch (page) {
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonsPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonsPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getTest(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTest(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getTask(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTask(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.getLesson(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLesson(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage);
                    break;
            }
        });
    }
    isLessonDone(id, user) {
        const doneLessons = user.done.lessons;
        const idAllLessonsDone = doneLessons.map((e) => e.id);
        const result = idAllLessonsDone.find((idDone) => id === +idDone);
        return result ? true : false;
    }
    isLessonInFavourites(id, user) {
        const userFavoritesLessons = user.favourites.lessons;
        const userFavoritesLessonsId = userFavoritesLessons.map((e) => e.id);
        return userFavoritesLessonsId.includes(id) ? true : false;
    }
    addLessonToFavourites(id, user) {
        if (!this.isLessonInFavourites(id, user)) {
            user.favourites.lessons.push({ id: Number(`${id}`) });
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.updateUserData();
        }
    }
    removeLessonFromFavourites(id, user) {
        if (this.isLessonInFavourites(id, user)) {
            user.favourites.lessons = user.favourites.lessons.filter((e) => e.id !== id);
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.updateUserData();
        }
    }
    addLessonToDone(id, user) {
        const doneLessons = user.done.lessons;
        const idAllLessonsDone = doneLessons.map((e) => e.id);
        if (!idAllLessonsDone.includes(id)) {
            user.done.lessons.push({ id: Number(`${id}`) });
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.updateUserData();
        }
    }
    addComment(lesson, commentText, userName) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!lesson.comments) {
                lesson.comments = [];
            }
            const commentsPrevious = lesson.comments;
            const commentId = commentsPrevious.length + 1;
            const commentAuthor = userName;
            const commentContent = commentText;
            lesson.comments.unshift({
                id: commentId,
                userName: commentAuthor,
                content: commentContent,
            });
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLesson(lesson);
            yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.updateLessonComments();
        });
    }
    renderCommentBlock(user, commentsPosted) {
        if (commentsPosted.node.children.length !== 0) {
            while (commentsPosted.node.lastChild) {
                commentsPosted.node.removeChild(commentsPosted.node.lastChild);
            }
            commentsPosted.node.removeChild;
        }
        const lessonComments = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getLesson().comments;
        if (lessonComments) {
            lessonComments.forEach((comment) => __awaiter(this, void 0, void 0, function* () {
                const userComment = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](commentsPosted.node, 'div', 'container mb-5');
                const userNameContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](userComment.node, 'div', 'd-flex align-items-end mb-3');
                const userIcon = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](userNameContainer.node, 'img', 'avatar');
                userIcon.node.src = _assets_svg_avatar_svg__WEBPACK_IMPORTED_MODULE_5__;
                new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](userNameContainer.node, 'span', 'name fw-semibold', comment.userName);
                new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](userComment.node, 'div', 'comment-content', comment.content);
            }));
        }
    }
}


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-auth-page.ts":
/*!***********************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-auth-page.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MainAuthPage": () => (/* binding */ MainAuthPage)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _main_auth_page_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main-auth-page.scss */ "./ts/components/main/main-page/main-auth-page/main-auth-page.scss");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _header_header_auth_header_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../header/header-auth/header-auth */ "./ts/components/header/header-auth/header-auth.ts");
/* harmony import */ var _assets_svg_avatar_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../assets/svg/avatar.svg */ "./assets/svg/avatar.svg");
/* harmony import */ var _main_avatars_main_avatars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./main-avatars/main-avatars */ "./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _spinner_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../spinner/spinner */ "./ts/components/main/spinner/spinner.ts");








class MainAuthPage extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container');
        const currentName = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser().name || '';
        const profile = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'profile container');
        const profileImgContainer = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](profile.node, 'div', 'profile_img_container');
        const profileAva = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](profileImgContainer.node, 'img', 'profile_img img-fluid');
        profileAva.node.alt = 'avatar';
        profileAva.node.src = _assets_svg_avatar_svg__WEBPACK_IMPORTED_MODULE_4__;
        if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUrlAvatar()) {
            profileAva.node.src = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUrlAvatar();
        }
        else {
            profileAva.node.src = _assets_svg_avatar_svg__WEBPACK_IMPORTED_MODULE_4__;
        }
        const avaChange = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](profileImgContainer.node, 'div', 'profile_ava_change', 'Изменить аватар');
        const profileRight = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](profile.node, 'div', 'profile_right container');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](profileRight.node, 'p', 'text-center display-4', `Привет ${currentName}!`);
        new _header_header_auth_header_auth__WEBPACK_IMPORTED_MODULE_3__.HeaderAuth(profileRight.node);
        avaChange.node.onclick = () => this.selectNewAvatar(profile.node);
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_6__.StateOptions.changeAvatar:
                    profileAva.node.src = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUrlAvatar();
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_6__.StateOptions.statusLoader:
                    this.createLoader(profile.node);
                    break;
            }
        });
    }
    createLoader(profileNode) {
        if (this.spinner) {
            this.spinner.destroy();
        }
        const isLoad = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getLoaderStatus();
        if (isLoad) {
            this.spinner = new _spinner_spinner__WEBPACK_IMPORTED_MODULE_7__.Spinner(profileNode);
        }
        else {
            this.spinner.destroy();
        }
    }
    selectNewAvatar(profileNode) {
        if (this.avatarsPopup) {
            this.avatarsPopup.destroy();
        }
        this.avatarsPopup = new _main_avatars_main_avatars__WEBPACK_IMPORTED_MODULE_5__.MainAvatars(profileNode);
    }
}


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-pagination.ts":
/*!***********************************************************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-pagination.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AvatarPagination": () => (/* binding */ AvatarPagination)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _avatars_paginations_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./avatars-paginations.scss */ "./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-paginations.scss");




class AvatarPagination extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'nav', 'pagination_inner');
        this.pagItems = [];
        const pagination = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'ul', 'pagination pagination-lg');
        const pagPrevInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagination.node, 'li', 'page-item');
        const pagPrev = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagPrevInner.node, 'a', 'page-link');
        pagPrev.node.href = '#';
        pagPrev.node.setAttribute('aria-label', 'Previous');
        const pagPrevText = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagPrev.node, 'span', '', '<');
        const startPage = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage();
        const endPage = startPage + 3;
        pagPrevText.node.setAttribute('aria-hidden', 'true');
        pagPrev.node.onclick = () => this.prevPage();
        for (let i = startPage; i < endPage; i++) {
            const pagItem = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagination.node, 'li', 'page-item');
            const pagItemInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagItem.node, 'a', 'page-link', `${i}`);
            this.pagItems.push(pagItemInner.node);
            pagItemInner.node.onclick = () => this.setPage(Number(pagItemInner.node.textContent));
        }
        const pagNextInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagination.node, 'li', 'page-item');
        const pagNext = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagNextInner.node, 'a', 'page-link');
        pagNext.node.href = '#';
        pagNext.node.setAttribute('aria-label', 'Previous');
        const pagNextText = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](pagNext.node, 'span', '', '>');
        pagNextText.node.setAttribute('aria-hidden', 'true');
        pagNext.node.onclick = () => this.nextPage();
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.avatarsPage:
                    this.pagItems.forEach((el, i) => {
                        if (i === 0) {
                            el.textContent = `${_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage()}`;
                        }
                        if (i === 1) {
                            el.textContent = `${_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage() + 1}`;
                        }
                        if (i === 2) {
                            el.textContent = `${_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage() + 2}`;
                        }
                    });
                    break;
            }
        });
    }
    setPage(page) {
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setCurrentAvatarsPage(page);
        this.pagItems.forEach((el) => {
            if (Number(el.textContent) === _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage()) {
                el.classList.add('active');
            }
            else {
                el.classList.remove('active');
            }
        });
    }
    prevPage() {
        let currentPage = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage();
        if (currentPage > 1) {
            _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setCurrentAvatarsPage((currentPage -= 1));
        }
        else {
            _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setCurrentAvatarsPage(1);
        }
    }
    nextPage() {
        let currentPage = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentAvatarsPage();
        if (currentPage < _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getMaxAvatarsPages()) {
            _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setCurrentAvatarsPage((currentPage += 1));
        }
        else {
            _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setCurrentAvatarsPage(_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getMaxAvatarsPages());
        }
    }
}


/***/ }),

/***/ "./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.ts":
/*!**********************************************************************************!*\
  !*** ./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MainAvatars": () => (/* binding */ MainAvatars)
/* harmony export */ });
/* harmony import */ var _api_avatars_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../api/avatars-api */ "./ts/api/avatars-api.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _avatars_pagination_avatars_pagination__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./avatars-pagination/avatars-pagination */ "./ts/components/main/main-page/main-auth-page/main-avatars/avatars-pagination/avatars-pagination.ts");
/* harmony import */ var _main_avatars_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./main-avatars.scss */ "./ts/components/main/main-page/main-auth-page/main-avatars/main-avatars.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






class MainAvatars extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'avatars');
        this.currentAvatars = [];
        const closeBtn = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn-close avatars_btn_close');
        closeBtn.node.type = 'button';
        closeBtn.node.setAttribute('aria-label', 'Close');
        closeBtn.node.onclick = () => this.closeAvatarsMenu();
        const avatarsInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'avatars_inner');
        const avatarsLeft = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](avatarsInner.node, 'div', 'avatars_left');
        const avatarsItems = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](avatarsLeft.node, 'div', 'avatars_items');
        this.getAvatars(avatarsItems.node);
        new _avatars_pagination_avatars_pagination__WEBPACK_IMPORTED_MODULE_4__.AvatarPagination(avatarsLeft.node);
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_3__.StateOptions.avatarsPage:
                    this.getAvatars(avatarsItems.node);
                    break;
            }
        });
    }
    closeAvatarsMenu() {
        this.destroy();
    }
    getAvatars(avatarsNode) {
        return __awaiter(this, void 0, void 0, function* () {
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLoader(true);
            if (this.currentAvatars.length > 0) {
                this.currentAvatars.forEach((el) => {
                    el.remove();
                });
            }
            const avatarsArray = yield (0,_api_avatars_api__WEBPACK_IMPORTED_MODULE_0__.getImages)(_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getCurrentAvatarsPage());
            avatarsArray.forEach((url) => {
                const img = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](avatarsNode, 'img', 'avatars_img');
                this.currentAvatars.push(img.node);
                img.node.onclick = () => _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewAvatar(url);
                img.node.src = url;
            });
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLoader(false);
        });
    }
}


/***/ }),

/***/ "./ts/components/main/main-page/main-page.ts":
/*!***************************************************!*\
  !*** ./ts/components/main/main-page/main-page.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MainPage": () => (/* binding */ MainPage)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main_auth_page_main_auth_page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./main-auth-page/main-auth-page */ "./ts/components/main/main-page/main-auth-page/main-auth-page.ts");
/* harmony import */ var _main_page_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./main-page.scss */ "./ts/components/main/main-page/main-page.scss");
/* harmony import */ var _main_unauth_page_main_unauth_page__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./main-unauth-page/main-unauth-page */ "./ts/components/main/main-page/main-unauth-page/main-unauth-page.ts");





class MainPage extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'main-page');
        if (_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getAuthUser()) {
            new _main_auth_page_main_auth_page__WEBPACK_IMPORTED_MODULE_2__.MainAuthPage(this.node);
        }
        else {
            new _main_unauth_page_main_unauth_page__WEBPACK_IMPORTED_MODULE_4__.MainUnauthPage(this.node);
        }
    }
}


/***/ }),

/***/ "./ts/components/main/main-page/main-unauth-page/main-unauth-page.ts":
/*!***************************************************************************!*\
  !*** ./ts/components/main/main-page/main-unauth-page/main-unauth-page.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MainUnauthPage": () => (/* binding */ MainUnauthPage)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _header_header_unauth_header_unauth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../header/header-unauth/header-unauth */ "./ts/components/header/header-unauth/header-unauth.ts");


class MainUnauthPage extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'p', 'display-3 text-center', 'А вы знаете Front-end?');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'h6', 'text-center display-6', `Данное приложение на сайте представляет собой онлайн-курс по фронтенд-разработке, включающий в себя теоретический материал, тесты и задачи.
      Пользователь может зарегистрироваться на сайте и начать проходить курс. На главной странице он сможет выбрать тему, которую он хочет изучить, и перейти на страницу с теоретическим материалом по этой теме.
      На странице с теоретическим материалом пользователь может прочитать информацию о концепциях и технологиях, связанных с фронтенд-разработкой. Кроме того, на этой странице могут быть встроены видеоуроки и интерактивные элементы, которые помогут пользователю лучше усвоить материал.
      После того, как пользователь изучил теорию, он может пройти тесты, чтобы проверить свои знания. Тесты могут быть как множественного выбора, так и открытого типа. После прохождения тестов пользователь получит обратную связь о своих знаниях и сможет перейти к следующей теме.
      На странице с задачами пользователь может попрактиковаться в написании кода. Задачи могут быть как простыми, так и сложными, и могут включать в себя использование различных технологий.
      Кроме того, приложение может содержать разделы для общения с другими участниками курса, а также для получения дополнительной информации и ресурсов по теме.`);
        new _header_header_unauth_header_unauth__WEBPACK_IMPORTED_MODULE_1__.HeaderUnauth(this.node);
    }
}


/***/ }),

/***/ "./ts/components/main/main.ts":
/*!************************************!*\
  !*** ./ts/components/main/main.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Main": () => (/* binding */ Main),
/* harmony export */   "PagesList": () => (/* binding */ PagesList)
/* harmony export */ });
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/types */ "./ts/api/types.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _auth_page_auth_page__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auth-page/auth-page */ "./ts/components/main/auth-page/auth-page.ts");
/* harmony import */ var _categories_page_categories_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./categories-page/categories-page */ "./ts/components/main/categories-page/categories-page.ts");
/* harmony import */ var _favor_page_favor_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./favor-page/favor-page */ "./ts/components/main/favor-page/favor-page.ts");
/* harmony import */ var _lesson_page_lesson_page__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lesson-page/lesson-page */ "./ts/components/main/lesson-page/lesson-page.ts");
/* harmony import */ var _main_page_main_page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./main-page/main-page */ "./ts/components/main/main-page/main-page.ts");
/* harmony import */ var _set_page_set_page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./set-page/set-page */ "./ts/components/main/set-page/set-page.ts");
/* harmony import */ var _statist_page_statist_page__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./statist-page/statist-page */ "./ts/components/main/statist-page/statist-page.ts");
/* harmony import */ var _task_page_task_page__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./task-page/task-page */ "./ts/components/main/task-page/task-page.ts");
/* harmony import */ var _test_page_test_page__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./test-page/test-page */ "./ts/components/main/test-page/test-page.ts");
/* harmony import */ var _unauth_page_unauth_page__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./unauth-page/unauth-page */ "./ts/components/main/unauth-page/unauth-page.ts");
/* harmony import */ var _main_page_scss__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./main-page.scss */ "./ts/components/main/main-page.scss");















var PagesList;
(function (PagesList) {
    PagesList["mainPage"] = "\u0413\u043B\u0430\u0432\u043D\u0430\u044F";
    PagesList["lessonsPage"] = "\u0423\u0440\u043E\u043A\u0438";
    PagesList["lessonPage"] = "\u0423\u0440\u043E\u043A";
    PagesList["testsPage"] = "\u0422\u0435\u0441\u0442\u044B";
    PagesList["testPage"] = "\u0422\u0435\u0441\u0442";
    PagesList["tasksPage"] = "\u0417\u0430\u0434\u0430\u0447\u0438";
    PagesList["taskPage"] = "\u0411\u043B\u043E\u043A \u0437\u0430\u0434\u0430\u0447";
    PagesList["favorPage"] = "\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435";
    PagesList["statistPage"] = "\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430";
    PagesList["setPage"] = "\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438";
    PagesList["authPage"] = "\u0412\u043E\u0439\u0442\u0438";
    PagesList["unauthPage"] = "\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F";
    PagesList["logout"] = "\u0412\u044B\u0439\u0442\u0438";
})(PagesList || (PagesList = {}));
class Main extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'main', 'main');
        this.createNewPage();
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            if (type === _common_state_types__WEBPACK_IMPORTED_MODULE_3__.StateOptions.changePage) {
                this.createNewPage();
            }
        });
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_3__.StateOptions.changeAnimation:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAnim()) {
                        this.mainInner.node.classList.remove('card_anim');
                    }
                    else {
                        this.mainInner.node.classList.add('card_anim');
                    }
                    break;
            }
        });
    }
    createNewPage() {
        if (this.mainInner) {
            this.mainInner.node.remove();
        }
        this.mainInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'main_inner container');
        if (!_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAnim()) {
            this.mainInner.node.classList.add('card_anim');
        }
        else {
            this.mainInner.node.classList.remove('card_anim');
        }
        const currentPageName = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getCurrentPage().name;
        switch (currentPageName) {
            case PagesList.mainPage:
                new _main_page_main_page__WEBPACK_IMPORTED_MODULE_8__.MainPage(this.mainInner.node);
                break;
            case PagesList.lessonsPage:
                new _categories_page_categories_page__WEBPACK_IMPORTED_MODULE_5__.CategoriesPage(this.mainInner.node, _api_types__WEBPACK_IMPORTED_MODULE_0__.Places.lessons);
                break;
            case PagesList.lessonPage:
                new _lesson_page_lesson_page__WEBPACK_IMPORTED_MODULE_7__.LessonPage(this.mainInner.node);
                break;
            case PagesList.testsPage:
                new _categories_page_categories_page__WEBPACK_IMPORTED_MODULE_5__.CategoriesPage(this.mainInner.node, _api_types__WEBPACK_IMPORTED_MODULE_0__.Places.tests);
                break;
            case PagesList.testPage:
                new _test_page_test_page__WEBPACK_IMPORTED_MODULE_12__.TestPage(this.mainInner.node);
                break;
            case PagesList.tasksPage:
                new _categories_page_categories_page__WEBPACK_IMPORTED_MODULE_5__.CategoriesPage(this.mainInner.node, _api_types__WEBPACK_IMPORTED_MODULE_0__.Places.tasks);
                break;
            case PagesList.taskPage:
                new _task_page_task_page__WEBPACK_IMPORTED_MODULE_11__.TaskPage(this.mainInner.node);
                break;
            case PagesList.authPage:
                new _auth_page_auth_page__WEBPACK_IMPORTED_MODULE_4__.AuthPage(this.mainInner.node);
                break;
            case PagesList.unauthPage:
                new _unauth_page_unauth_page__WEBPACK_IMPORTED_MODULE_13__.UnauthPage(this.mainInner.node);
                break;
            case PagesList.favorPage:
                new _favor_page_favor_page__WEBPACK_IMPORTED_MODULE_6__.FavorPage(this.mainInner.node);
                break;
            case PagesList.statistPage:
                new _statist_page_statist_page__WEBPACK_IMPORTED_MODULE_10__.StatistPage(this.mainInner.node);
                break;
            case PagesList.setPage:
                new _set_page_set_page__WEBPACK_IMPORTED_MODULE_9__.SetPage(this.mainInner.node);
                break;
            case PagesList.logout:
                new _main_page_main_page__WEBPACK_IMPORTED_MODULE_8__.MainPage(this.mainInner.node);
                break;
            default:
                new _main_page_main_page__WEBPACK_IMPORTED_MODULE_8__.MainPage(this.mainInner.node);
        }
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/change-name/change-name.ts":
/*!****************************************************************!*\
  !*** ./ts/components/main/set-page/change-name/change-name.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChangeName": () => (/* binding */ ChangeName)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class ChangeName extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'form form-name');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'h5', 'display-5', 'Смена имени');
        const nameInputInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'form-floating mb-3');
        const nameInput = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](nameInputInner.node, 'input', 'form-control');
        nameInput.node.type = 'text';
        nameInput.node.setAttribute('id', 'floatingInput');
        nameInput.node.setAttribute('placehnameer', 'Введите новое имя');
        const nameLabel = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](nameInputInner.node, 'label', 'label-name', `Текущее имя: ${_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentName()}`);
        nameLabel.node.setAttribute('for', 'floatingInput');
        const changeBtn = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'button', 'btn btn-primary', 'Сменить имя');
        changeBtn.node.setAttribute('type', 'button');
        changeBtn.node.setAttribute('data-bs-toggle', 'modal');
        changeBtn.node.setAttribute('data-bs-target', '#staticBackdrop');
        changeBtn.node.addEventListener('click', () => _common_state__WEBPACK_IMPORTED_MODULE_1__.state.playSound());
        changeBtn.node.disabled = true;
        changeBtn.node.onclick = () => this.changeName(nameInput.node.value);
        nameInput.node.oninput = () => this.isDisableBtn(changeBtn.node, nameInput.node.value);
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeName:
                    nameLabel.node.textContent = `Текущее имя: ${_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentName()}`;
                    nameInput.node.value = '';
                    changeBtn.node.disabled = true;
                    break;
            }
        });
    }
    isDisableBtn(btn, name) {
        if (name.length > 3 && name.length < 30) {
            btn.disabled = false;
        }
    }
    changeName(name) {
        return __awaiter(this, void 0, void 0, function* () {
            _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setUserName(name);
        });
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/changePassword/change-password.ts":
/*!***********************************************************************!*\
  !*** ./ts/components/main/set-page/changePassword/change-password.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChangePassword": () => (/* binding */ ChangePassword)
/* harmony export */ });
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _change_password_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./change-password.scss */ "./ts/components/main/set-page/changePassword/change-password.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class ChangePassword extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'form');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'h5', 'display-5', 'Смена пароля');
        const oldInputInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'form-floating mb-3');
        const oldInput = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](oldInputInner.node, 'input', 'form-control');
        oldInput.node.type = 'password';
        oldInput.node.autocomplete = 'off';
        oldInput.node.setAttribute('id', 'floatingInput');
        oldInput.node.setAttribute('placeholder', 'Старый пароль');
        const oldLabel = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](oldInputInner.node, 'label', 'label-password', 'Старый пароль');
        oldLabel.node.setAttribute('for', 'floatingInput');
        const newInputInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'form-floating mb-3');
        const newInput = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](newInputInner.node, 'input', 'form-control');
        newInput.node.setAttribute('id', 'floatingInput1');
        newInput.node.setAttribute('placeholder', 'Новый пароль');
        newInput.node.type = 'password';
        newInput.node.autocomplete = 'off';
        const newLabel = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](newInputInner.node, 'label', 'label-password', 'Новый пароль');
        newLabel.node.setAttribute('for', 'floatingInput1');
        const changeBtn = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn btn-primary', 'Сменить пароль');
        changeBtn.node.setAttribute('type', 'button');
        changeBtn.node.setAttribute('data-bs-toggle', 'modal');
        changeBtn.node.setAttribute('data-bs-target', '#staticBackdrop');
        changeBtn.node.addEventListener('click', () => _common_state__WEBPACK_IMPORTED_MODULE_2__.state.playSound());
        changeBtn.node.onclick = () => this.changePassword(newInput.node.value, oldInput.node.value);
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_3__.StateOptions.changePassword:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getPasswordValidate()) {
                        oldInput.node.classList.add('is-valid');
                        newInput.node.classList.add('is-valid');
                        oldInput.node.classList.remove('is-invalid');
                        newInput.node.classList.remove('is-invalid');
                    }
                    else {
                        oldInput.node.classList.add('is-invalid');
                        oldInput.node.classList.remove('is-valid');
                        newInput.node.classList.add('is-invalid');
                        newInput.node.classList.remove('is-valid');
                    }
                    break;
            }
        });
    }
    changePassword(newPassword, oldPassword) {
        return __awaiter(this, void 0, void 0, function* () {
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPassword(newPassword, oldPassword);
            yield _api_data_controller__WEBPACK_IMPORTED_MODULE_0__.DataController.updateUserData();
        });
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/set-data.ts":
/*!*************************************************!*\
  !*** ./ts/components/main/set-page/set-data.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setData": () => (/* binding */ setData)
/* harmony export */ });
const setData = [
    { name: 'Тема', option: ['Тёмная', 'Светлая'] },
    { name: 'Анимация', option: ['Выключить', 'Включить'] },
    { name: 'Прогресс', option: ['Обнулить прогресс'] },
    { name: 'Звук', option: ['Выключить', 'Включить'] },
];


/***/ }),

/***/ "./ts/components/main/set-page/set-page.ts":
/*!*************************************************!*\
  !*** ./ts/components/main/set-page/set-page.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SetPage": () => (/* binding */ SetPage)
/* harmony export */ });
/* harmony import */ var _set_page_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./set-page.scss */ "./ts/components/main/set-page/set-page.scss");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _switcher_el_switcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./switcher-el/switcher */ "./ts/components/main/set-page/switcher-el/switcher.ts");
/* harmony import */ var _set_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-data */ "./ts/components/main/set-page/set-data.ts");
/* harmony import */ var _sound_el_sound_el__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sound-el/sound-el */ "./ts/components/main/set-page/sound-el/sound-el.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _changePassword_change_password__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./changePassword/change-password */ "./ts/components/main/set-page/changePassword/change-password.ts");
/* harmony import */ var _set_popup_set_popup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./set-popup/set-popup */ "./ts/components/main/set-page/set-popup/set-popup.ts");
/* harmony import */ var _change_name_change_name__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./change-name/change-name */ "./ts/components/main/set-page/change-name/change-name.ts");









class SetPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'set container');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'h2', 'h2 display-2 text-center', 'Настройки');
        const setInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'set_inner container d-flex justify-content-between');
        const innerLeft = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](setInner.node, 'div', 'set_left');
        const innerRight = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](setInner.node, 'div', 'set_right');
        _set_data__WEBPACK_IMPORTED_MODULE_3__.setData.forEach((el, index) => {
            const data = { name: el.name, option: el.option[0] };
            if (index !== _set_data__WEBPACK_IMPORTED_MODULE_3__.setData.length - 1) {
                new _switcher_el_switcher__WEBPACK_IMPORTED_MODULE_2__.Switcher(innerLeft.node, data);
            }
            else {
                new _sound_el_sound_el__WEBPACK_IMPORTED_MODULE_4__.SoundEl(innerRight.node, data);
            }
        });
        new _changePassword_change_password__WEBPACK_IMPORTED_MODULE_6__.ChangePassword(innerRight.node);
        new _change_name_change_name__WEBPACK_IMPORTED_MODULE_8__.ChangeName(innerRight.node);
        const btnInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'set_btn_inner');
        const btnReset = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](btnInner.node, 'button', 'set_btn btn btn-primary', 'сбросить');
        btnReset.node.onclick = () => this.resetSettings();
        btnReset.node.setAttribute('type', 'button');
        btnReset.node.setAttribute('data-bs-toggle', 'modal');
        btnReset.node.setAttribute('data-bs-target', '#staticBackdrop');
        const btnSave = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](btnInner.node, 'button', 'set_btn btn btn-primary', 'сохранить');
        btnSave.node.onclick = () => this.saveSettings();
        btnSave.node.setAttribute('type', 'button');
        btnSave.node.setAttribute('data-bs-toggle', 'modal');
        btnSave.node.setAttribute('data-bs-target', '#staticBackdrop');
        this.createPopup();
    }
    createPopup() {
        if (this.popup) {
            this.popup.destroy();
        }
        this.popup = new _set_popup_set_popup__WEBPACK_IMPORTED_MODULE_7__.SetPopup(this.node);
    }
    resetSettings() {
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setTheme(false);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setAnimation(false);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setProgress(false);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setSound(true);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setVolume(0.4);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.resetSettings();
    }
    saveSettings() {
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.saveSettings();
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/set-popup/set-popup.ts":
/*!************************************************************!*\
  !*** ./ts/components/main/set-page/set-popup/set-popup.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SetPopup": () => (/* binding */ SetPopup)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _popup_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./popup.scss */ "./ts/components/main/set-page/set-popup/popup.scss");




class SetPopup extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'modal fade');
        this.node.setAttribute('id', 'staticBackdrop');
        this.node.setAttribute('data-bs-backdrop', 'static');
        this.node.setAttribute('data-bs-keyboard', 'false');
        this.node.setAttribute('tabindex', '-1');
        this.node.setAttribute('aria-labelledby', 'staticBackdropLabel');
        this.node.setAttribute('aria-hidden', 'true');
        const modalDialog = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'modal-dialog modal-position');
        const modalContent = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalDialog.node, 'div', 'modal-content');
        const modalHeader = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalContent.node, 'div', 'modal-header');
        const modalTitle = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalHeader.node, 'h1', 'modal-title', 'Внимание!');
        modalTitle.node.setAttribute('id', 'staticBackdropLabel');
        modalTitle.node.style.color = 'black';
        const btnClose = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalHeader.node, 'button', 'btn-close');
        btnClose.node.setAttribute('type', 'button');
        btnClose.node.setAttribute('data-bs-dismiss', 'modal');
        btnClose.node.setAttribute('aria-label', 'Close');
        btnClose.node.addEventListener('click', () => _common_state__WEBPACK_IMPORTED_MODULE_1__.state.playSound());
        const modalMain = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalContent.node, 'div', 'modal-body');
        modalMain.node.style.color = 'black';
        const modalFooter = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalContent.node, 'div', 'modal-footer');
        const btn = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](modalFooter.node, 'button', 'btn btn-secondary', 'Закрыть');
        btn.node.setAttribute('type', 'button');
        btn.node.setAttribute('data-bs-dismiss', 'modal');
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changePassword:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getPasswordValidate()) {
                        modalMain.node.textContent = 'Вы изменили пароль!';
                    }
                    else {
                        modalMain.node.textContent = 'Неверный старый пароль или новый пароль меньше 4 символов!';
                    }
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.resetSettings:
                    modalMain.node.textContent = 'Вы сбросили настройки, не забудьте сохранить результат!';
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.saveSettings:
                    modalMain.node.textContent = 'Вы сохранили настройки!';
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeName:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentName().length < 2 && _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getCurrentName().length > 30) {
                        modalMain.node.textContent = 'Неверное имя!';
                    }
                    else {
                        modalMain.node.textContent = 'Вы успешно изменили имя!';
                    }
                    break;
            }
        });
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/sound-el/sound-el.ts":
/*!**********************************************************!*\
  !*** ./ts/components/main/set-page/sound-el/sound-el.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SoundEl": () => (/* binding */ SoundEl)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _sound_el_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound-el.scss */ "./ts/components/main/set-page/sound-el/sound-el.scss");
/* harmony import */ var _switcher_el_switcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../switcher-el/switcher */ "./ts/components/main/set-page/switcher-el/switcher.ts");
/* harmony import */ var _assets_image_sound_off_png__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../assets/image/sound-off.png */ "./assets/image/sound-off.png");
/* harmony import */ var _assets_image_sound_on_png__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../assets/image/sound-on.png */ "./assets/image/sound-on.png");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");







class SoundEl extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode, options) {
        super(parentNode, 'div', 'sound');
        this.oldVolume = '40';
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'p', 'text-center display-6', options.name);
        const inputInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'd-flex align-items-center');
        const soundImage = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](inputInner.node, 'img', 'sound_img');
        soundImage.node.src = _assets_image_sound_on_png__WEBPACK_IMPORTED_MODULE_4__;
        soundImage.node.alt = 'sound';
        soundImage.node.onclick = () => this.changeOption(options.name);
        const inputLabel = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](inputInner.node, 'label', 'form-label');
        inputLabel.node.setAttribute('for', 'sound-range');
        const input = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](inputInner.node, 'input', 'form-range');
        input.node.type = 'range';
        input.node.id = 'sound-range';
        input.node.onchange = () => this.changeVolume(input.node.value);
        this.currentSettings(input.node, soundImage.node);
        _common_state__WEBPACK_IMPORTED_MODULE_5__.state.onUpdate.add((type) => {
            const currentSet = _common_state__WEBPACK_IMPORTED_MODULE_5__.state.getSettings();
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_6__.StateOptions.changeSound:
                    if (currentSet.sound) {
                        soundImage.node.src = _assets_image_sound_on_png__WEBPACK_IMPORTED_MODULE_4__;
                        input.node.value = `${this.oldVolume}`;
                    }
                    else {
                        soundImage.node.src = _assets_image_sound_off_png__WEBPACK_IMPORTED_MODULE_3__;
                        input.node.value = '0';
                    }
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_6__.StateOptions.changeVolume:
                    if (currentSet.volume > 0) {
                        soundImage.node.src = _assets_image_sound_on_png__WEBPACK_IMPORTED_MODULE_4__;
                    }
                    else {
                        soundImage.node.src = _assets_image_sound_off_png__WEBPACK_IMPORTED_MODULE_3__;
                    }
                    break;
            }
        });
    }
    changeVolume(value) {
        this.oldVolume = value;
        if (+value > 0) {
            _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setSound(true);
            _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setVolume(+value / 100);
        }
        else {
            _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setSound(false);
            _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setVolume(0);
        }
    }
    changeOption(option) {
        const currentSet = _common_state__WEBPACK_IMPORTED_MODULE_5__.state.getSettings();
        switch (option) {
            case _switcher_el_switcher__WEBPACK_IMPORTED_MODULE_2__.SwitcherOption.sound:
                if (currentSet.sound) {
                    _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setSound(false);
                    _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setVolume(0);
                }
                else {
                    _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setSound(true);
                    _common_state__WEBPACK_IMPORTED_MODULE_5__.state.setVolume(+this.oldVolume / 100);
                }
                break;
        }
    }
    currentSettings(input, soundImg) {
        const settings = _common_state__WEBPACK_IMPORTED_MODULE_5__.state.getSettings();
        input.value = (settings.volume * 100).toString();
        if (settings.volume === 0) {
            soundImg.src = _assets_image_sound_off_png__WEBPACK_IMPORTED_MODULE_3__;
        }
        else {
            soundImg.src = _assets_image_sound_on_png__WEBPACK_IMPORTED_MODULE_4__;
        }
    }
}


/***/ }),

/***/ "./ts/components/main/set-page/switcher-el/switcher.ts":
/*!*************************************************************!*\
  !*** ./ts/components/main/set-page/switcher-el/switcher.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Switcher": () => (/* binding */ Switcher),
/* harmony export */   "SwitcherOption": () => (/* binding */ SwitcherOption)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _switcher_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./switcher.scss */ "./ts/components/main/set-page/switcher-el/switcher.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




var SwitcherOption;
(function (SwitcherOption) {
    SwitcherOption["theme"] = "\u0422\u0435\u043C\u0430";
    SwitcherOption["animation"] = "\u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F";
    SwitcherOption["progress"] = "\u041F\u0440\u043E\u0433\u0440\u0435\u0441\u0441";
    SwitcherOption["sound"] = "\u0417\u0432\u0443\u043A";
})(SwitcherOption || (SwitcherOption = {}));
var SwitcherValues;
(function (SwitcherValues) {
    SwitcherValues["darkTheme"] = "\u0422\u0451\u043C\u043D\u0430\u044F";
    SwitcherValues["lightTheme"] = "\u0421\u0432\u0435\u0442\u043B\u0430\u044F";
    SwitcherValues["animOn"] = "\u0412\u043A\u043B\u044E\u0447\u0435\u043D\u0430";
    SwitcherValues["animOff"] = "\u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u0430";
    SwitcherValues["resetFalse"] = "\u041F\u0440\u043E\u0433\u0440\u0435\u0441\u0441 \u0431\u0443\u0434\u0435\u0442 \u0441\u0431\u0440\u043E\u0448\u0435\u043D";
    SwitcherValues["resetTrue"] = "\u041E\u0431\u043D\u0443\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441";
})(SwitcherValues || (SwitcherValues = {}));
class Switcher extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode, options) {
        super(parentNode, 'div', 'form-check form-switch d-flex flex-column');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'p', 'display-6 text-start', options.name);
        const inputInner = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'div', 'd-flex');
        const input = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](inputInner.node, 'input', 'form-check-input');
        input.node.type = 'checkbox';
        input.node.setAttribute('id', options.name);
        input.node.onclick = () => this.changeOption(options.name, input.node.checked);
        const label = new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](inputInner.node, 'label', 'form-check-label', options.option);
        label.node.setAttribute('for', options.name);
        this.currentSettings(input.node, options, label.node);
        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.onUpdate.add((type) => {
            const currentSettings = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getSettings();
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeTheme:
                    if (options.name === SwitcherOption.theme) {
                        if (currentSettings.theme) {
                            label.node.textContent = SwitcherValues.lightTheme;
                            input.node.checked = true;
                        }
                        else {
                            label.node.textContent = SwitcherValues.darkTheme;
                            input.node.checked = false;
                        }
                    }
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeAnimation:
                    if (options.name === SwitcherOption.animation) {
                        if (currentSettings.animation) {
                            input.node.checked = true;
                            label.node.textContent = SwitcherValues.animOff;
                        }
                        else {
                            input.node.checked = false;
                            label.node.textContent = SwitcherValues.animOn;
                        }
                    }
                    break;
                case _common_state_types__WEBPACK_IMPORTED_MODULE_2__.StateOptions.changeProgress:
                    if (options.name === SwitcherOption.progress) {
                        if (currentSettings.resetProgress) {
                            input.node.checked = true;
                            label.node.textContent = SwitcherValues.resetFalse;
                        }
                        else {
                            input.node.checked = false;
                            label.node.textContent = SwitcherValues.resetTrue;
                        }
                    }
                    break;
            }
        });
    }
    currentSettings(input, options, label) {
        const settings = _common_state__WEBPACK_IMPORTED_MODULE_1__.state.getSettings();
        switch (options.name) {
            case SwitcherOption.theme:
                if (settings.theme) {
                    input.checked = true;
                    label.textContent = SwitcherValues.lightTheme;
                }
                else {
                    input.checked = false;
                    label.textContent = SwitcherValues.darkTheme;
                }
                break;
            case SwitcherOption.animation:
                if (settings.animation) {
                    input.checked = true;
                    label.textContent = SwitcherValues.animOff;
                }
                else {
                    input.checked = false;
                    label.textContent = SwitcherValues.animOn;
                }
                break;
            case SwitcherOption.progress:
                if (settings.resetProgress) {
                    label.textContent = SwitcherValues.resetFalse;
                    input.checked = true;
                }
                else {
                    input.checked = false;
                    label.textContent = SwitcherValues.resetTrue;
                }
                break;
        }
    }
    changeOption(option, inputState) {
        return __awaiter(this, void 0, void 0, function* () {
            switch (option) {
                case SwitcherOption.theme:
                    if (inputState) {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setTheme(true);
                    }
                    else {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setTheme(false);
                    }
                    break;
                case SwitcherOption.animation:
                    if (inputState) {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setAnimation(true);
                    }
                    else {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setAnimation(false);
                    }
                    break;
                case SwitcherOption.progress:
                    if (inputState) {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setProgress(true);
                    }
                    else {
                        _common_state__WEBPACK_IMPORTED_MODULE_1__.state.setProgress(false);
                    }
                    break;
            }
        });
    }
}


/***/ }),

/***/ "./ts/components/main/spinner/spinner.ts":
/*!***********************************************!*\
  !*** ./ts/components/main/spinner/spinner.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Spinner": () => (/* binding */ Spinner)
/* harmony export */ });
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _spinner_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./spinner.scss */ "./ts/components/main/spinner/spinner.scss");


class Spinner extends _common_control__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'spinner-border text-danger spinner');
        this.node.setAttribute('role', 'status');
        new _common_control__WEBPACK_IMPORTED_MODULE_0__["default"](this.node, 'span', 'visually-hidden', 'Loading...');
    }
}


/***/ }),

/***/ "./ts/components/main/statist-page/statist-page.ts":
/*!*********************************************************!*\
  !*** ./ts/components/main/statist-page/statist-page.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StatistPage": () => (/* binding */ StatistPage)
/* harmony export */ });
/* harmony import */ var _statist_page_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./statist-page.scss */ "./ts/components/main/statist-page/statist-page.scss");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class StatistPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container py-5');
        this.renderStatisticHeader();
        this.renderCategories();
    }
    renderStatisticHeader() {
        const user = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser();
        const doneLessonsCount = user.done.lessons.length;
        const doneTestsCount = user.done.tests.length;
        const doneTasksCount = user.done.tasks.length;
        const row = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'row mb-5');
        const col1 = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](row.node, 'div', 'col');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col1.node, 'h2', 'text-center', 'ПРОЧИТАНО');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col1.node, 'p', 'text-center', `${doneLessonsCount}`);
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col1.node, 'p', 'text-center', 'уроков');
        const col2 = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](row.node, 'div', 'col');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col2.node, 'h2', 'text-center', 'ПРОЙДЕНО');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col2.node, 'p', 'text-center', `${doneTestsCount}`);
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col2.node, 'p', 'text-center', 'тестов');
        const col3 = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](row.node, 'div', 'col');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col3.node, 'h2', 'text-center', 'РЕШЕНО');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col3.node, 'p', 'text-center', `${doneTasksCount}`);
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](col3.node, 'p', 'text-center', 'задач');
    }
    renderCategories() {
        return __awaiter(this, void 0, void 0, function* () {
            const categories = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_3__.DataController.getCategories();
            const categoryListGroup = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'ul', 'list-group');
            categories.forEach((e) => {
                const categoryListGroupItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](categoryListGroup.node, 'li', 'list-group-item fs-2 py-3', e.name);
                const elementListGroup = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](categoryListGroupItem.node, 'ul', 'list-group list-group-item-light mt-3');
                const lessons = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](elementListGroup.node, 'li', 'list-group-item fs-4', 'Уроки');
                const lessonsProgress = this.getProgressValue(e.lessons, 'lessons');
                this.renderProgress(lessons.node, lessonsProgress);
                const tests = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](elementListGroup.node, 'li', 'list-group-item fs-4', 'Тесты');
                const testsProgress = this.getProgressValue(e.tests, 'tests');
                this.renderProgress(tests.node, testsProgress);
                const tasks = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](elementListGroup.node, 'li', 'list-group-item fs-4', 'Задачи');
                const tasksProgress = this.getProgressValue(e.tasks, 'tasks');
                this.renderProgress(tasks.node, tasksProgress);
            });
        });
    }
    getProgressValue(items, type) {
        const allItemsCount = items.length;
        const doneItems = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser().done[type];
        let doneItemsCount = 0;
        items.forEach((item) => {
            doneItems.forEach((doneItem) => {
                if (item.id === +doneItem.id) {
                    doneItemsCount += 1;
                }
            });
        });
        return doneItemsCount ? Math.round((doneItemsCount / allItemsCount) * 100) : 0;
    }
    renderProgress(parent, progressValue) {
        const progress = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](parent, 'div', 'progress');
        const progressBar = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](progress.node, 'div', 'progress-bar progress-bar-striped progress-bar-animated', `${progressValue}%`);
        progressBar.node.setAttribute('role', 'progressbar');
        progressBar.node.setAttribute('style', `width: ${progressValue}%`);
        progressBar.node.setAttribute('aria-valuenow', `${progressValue}`);
        progressBar.node.setAttribute('aria-valuemin', '0');
        progressBar.node.setAttribute('aria-valuemax', '100');
    }
}


/***/ }),

/***/ "./ts/components/main/task-page/task-page.ts":
/*!***************************************************!*\
  !*** ./ts/components/main/task-page/task-page.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TaskPage": () => (/* binding */ TaskPage)
/* harmony export */ });
/* harmony import */ var _task_page_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./task-page.scss */ "./ts/components/main/task-page/task-page.scss");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../api/types */ "./ts/api/types.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






class TaskPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container py-5');
        window.scrollTo(0, 0);
        const task = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getTask();
        const taskName = task.name;
        const taskId = task.id;
        const taskList = task.list;
        const taskCategory = task.category;
        const user = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getUser();
        const firstTaskId = 1;
        const lastTaskId = _common_state__WEBPACK_IMPORTED_MODULE_2__.state.getCategories(_api_types__WEBPACK_IMPORTED_MODULE_5__.Places.tasks)
            .map((e) => e.items)
            .reverse()[0]
            .slice(-1)[0].id;
        const breadcrumbs = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'nav', 'breadcrumbs');
        breadcrumbs.node.setAttribute('style', '--bs-breadcrumb-divider: ">";');
        breadcrumbs.node.setAttribute('aria-label', 'breadcrumb');
        const breadcrumbsList = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbs.node, 'ol', 'breadcrumb');
        const breadcrumbsItemsNames = ['Главная', 'Задачи', `${taskCategory}. ${taskName}`];
        breadcrumbsItemsNames.forEach((e, i) => {
            if (i !== breadcrumbsItemsNames.length - 1) {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item pe-auto fs-5');
                const breadcrumbsItemLink = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsItem.node, 'a', '', e);
                breadcrumbsItemLink.node.setAttribute('href', '#');
                breadcrumbsItem.node.onclick = () => this.switchPage(e, taskId);
            }
            else {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item active fs-5', e);
                breadcrumbsItem.node.setAttribute('aria-current', 'page');
            }
        });
        const headingContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'container d-flex flex-row');
        new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'h1', 'fw-bold mb-4', taskName);
        if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
            if (this.areAllTasksCategoryDone(taskId, user, taskList)) {
                const iconDone = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'i', 'bi bi-check-square-fill');
                iconDone.node.setAttribute('title', 'Done');
                iconDone.node.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
      </svg>`;
            }
            const iconMark = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'i');
            const emptyBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">
      <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
    </svg>`;
            const fillBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill" viewBox="0 0 16 16">
    <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/>
  </svg>`;
            if (this.isTaskInFavourites(taskId, user)) {
                iconMark.node.classList.add('bi-bookmark-fill');
                iconMark.node.innerHTML = fillBookMarkImg;
                iconMark.node.setAttribute('title', 'Remove from favourites');
            }
            else {
                iconMark.node.classList.add('bi-bookmark');
                iconMark.node.innerHTML = emptyBookMarkImg;
                iconMark.node.setAttribute('title', 'Add to favourites');
            }
            iconMark.node.onclick = () => {
                iconMark.node.classList.toggle('bi-bookmark');
                iconMark.node.classList.toggle('bi-bookmark-fill');
                if (iconMark.node.classList.contains('bi-bookmark-fill')) {
                    iconMark.node.innerHTML = fillBookMarkImg;
                    iconMark.node.setAttribute('title', 'Remove from favourites');
                    this.addTaskToFavourites(taskId, user);
                }
                else {
                    iconMark.node.innerHTML = emptyBookMarkImg;
                    iconMark.node.setAttribute('title', 'Add to favourites');
                    this.removeTaskFromFavourites(taskId, user);
                }
            };
        }
        const taskContentContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'container mb-5');
        const taskBlock = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](taskContentContainer.node, 'div', 'container');
        taskList.forEach((task, i) => {
            const taskRating = task.complexity;
            const maxRating = 3;
            const headingContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](taskBlock.node, 'div', 'd-flex align-items-center mb-3');
            new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'span', 'me-3 fw-semibold', `Задача ${i + 1}`);
            const starsContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](headingContainer.node, 'div', 'd-flex mb-2');
            for (let n = 0; n < maxRating; n += 1) {
                const iconStar = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](starsContainer.node, 'i', 'bi bi-star');
                if (n + 1 <= taskRating) {
                    iconStar.node.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
          <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
        </svg>`;
                }
                else {
                    iconStar.node.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
          <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
        </svg>`;
                }
            }
            const content = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](taskBlock.node, 'div', 'container mb-5');
            content.node.innerHTML = task.content;
            const buttonContainerSolution = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](taskBlock.node, 'div', 'container mb-5');
            const buttonSolution = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonContainerSolution.node, 'button', 'btn btn-info me-4', 'Показать/скрыть решение');
            buttonSolution.node.setAttribute('type', 'button');
            buttonSolution.node.setAttribute('data-bs-toggle', 'collapse');
            buttonSolution.node.setAttribute('data-bs-target', `#collapseTaskSolution${i}`);
            buttonSolution.node.setAttribute('aria-expanded', 'false');
            buttonSolution.node.setAttribute('aria-controls', 'collapseExample');
            buttonSolution.node.addEventListener('click', () => _common_state__WEBPACK_IMPORTED_MODULE_2__.state.playSound());
            if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getAuthUser()) {
                const buttonMarkedSolved = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonContainerSolution.node, 'button', 'btn btn-warning', 'Отметить решенной');
                if (this.isCurrentTaskDone(i + 1, user, taskId)) {
                    buttonMarkedSolved.node.textContent = 'Решена';
                    buttonMarkedSolved.node.classList.add('disabled');
                }
                else {
                    buttonMarkedSolved.node.onclick = () => {
                        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.playSound();
                        this.addCurrentTaskToDone(i + 1, user, taskId);
                        buttonMarkedSolved.node.textContent = 'Решена';
                        buttonMarkedSolved.node.classList.add('disabled');
                    };
                }
            }
            const solutionContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](taskBlock.node, 'div', 'collapse');
            solutionContainer.node.setAttribute('id', `collapseTaskSolution${i}`);
            const solutionContent = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](solutionContainer.node, 'div', 'card card-body text-dark');
            solutionContent.node.innerHTML = task.solution.join('\n');
        });
        const goToNextLessonButtonWrapper = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'd-flex justify-content-center');
        const goToNextLessonButton = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](goToNextLessonButtonWrapper.node, 'button', 'btn btn-success fs-3 mb-5', 'Перейти к следующей теме');
        if (taskId === lastTaskId) {
            goToNextLessonButton.node.classList.add('disabled');
        }
        goToNextLessonButton.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage, taskId + 1);
        };
        const buttonsTestRepeatContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'd-grid gap-2 col-2 mx-auto mb-5');
        const buttonRepeat = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsTestRepeatContainer.node, 'button', 'btn btn-primary', 'Повторить теорию');
        buttonRepeat.node.type = 'button';
        buttonRepeat.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage, taskId);
        };
        const buttonTest = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsTestRepeatContainer.node, 'button', 'btn btn-primary', 'Пройти тест');
        buttonTest.node.type = 'button';
        buttonTest.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage, taskId);
        };
        const buttonsPrevNextContainer = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'div', 'd-flex justify-content-sm-around mb-5');
        const buttonPrev = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к предыдущим задачам');
        buttonPrev.node.type = 'button';
        if (taskId === firstTaskId) {
            buttonPrev.node.classList.add('disabled');
        }
        else {
            buttonPrev.node.classList.remove('disabled');
            buttonPrev.node.onclick = () => this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage, taskId - 1);
        }
        const buttonNext = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к следующим задачам');
        buttonNext.node.type = 'button';
        if (taskId === lastTaskId) {
            buttonNext.node.classList.add('disabled');
        }
        buttonNext.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage, taskId + 1);
        };
        const buttonUp = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn btn-outline-info position-fixed bottom-0 end-0 mx-3 my-3', '↑');
        buttonUp.node.onclick = () => window.scrollTo(0, 0);
    }
    switchPage(page, id) {
        return __awaiter(this, void 0, void 0, function* () {
            let data;
            switch (page) {
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.mainPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonsPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonsPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.tasksPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.tasksPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testsPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testsPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.getTest(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTest(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.testPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.getLesson(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setLesson(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.lessonPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.getTask(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setTask(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_3__.PagesList.taskPage);
                    break;
            }
        });
    }
    isThisCategoryIdInDone(id, user) {
        const doneTasks = user.done.tasks;
        const idAllTasksDone = doneTasks.map((e) => Number(e.id));
        const result = idAllTasksDone.includes(id);
        return result ? true : false;
    }
    isCurrentTaskDone(id, user, idTaskCategory) {
        if (this.isThisCategoryIdInDone(idTaskCategory, user)) {
            const doneTasks = user.done.tasks;
            const idAllTasksInCategory = doneTasks.map((e) => e.list)[idTaskCategory - 1];
            const result = idAllTasksInCategory.includes(id);
            return result ? true : false;
        }
        return false;
    }
    isTaskInFavourites(id, user) {
        const userFavoritesTasks = user.favourites.tasks;
        const userFavoritesTasksId = userFavoritesTasks.map((e) => e.id);
        return userFavoritesTasksId.includes(id) ? true : false;
    }
    addTaskToFavourites(id, user) {
        if (!this.isTaskInFavourites(id, user)) {
            user.favourites.tasks.push({ id: Number(`${id}`) });
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.updateUserData();
        }
    }
    removeTaskFromFavourites(id, user) {
        if (this.isTaskInFavourites(id, user)) {
            user.favourites.tasks = user.favourites.tasks.filter((e) => e.id !== id);
            _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.updateUserData();
        }
    }
    addCurrentTaskToDone(id, user, idTaskCategory) {
        const allDoneTasks = user.done.tasks;
        if (this.isThisCategoryIdInDone(idTaskCategory, user)) {
            if (!this.isCurrentTaskDone(id, user, idTaskCategory)) {
                const doneTasksInCategory = allDoneTasks.filter((e) => e.id === idTaskCategory)[0].list;
                doneTasksInCategory.push(id);
                user.done.tasks = user.done.tasks.filter((e) => e.id !== idTaskCategory);
                user.done.tasks.push({
                    id: idTaskCategory,
                    list: doneTasksInCategory,
                });
            }
            else {
                return;
            }
        }
        else {
            user.done.tasks.push({
                id: idTaskCategory,
                list: [id],
            });
        }
        user.place = _api_types__WEBPACK_IMPORTED_MODULE_5__.Places.tasks;
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
        _api_data_controller__WEBPACK_IMPORTED_MODULE_4__.DataController.updateUserData();
    }
    areAllTasksCategoryDone(idTaskCategory, user, taskList) {
        if (this.isThisCategoryIdInDone(idTaskCategory, user)) {
            const lengthTasksDoneInCategoryList = user.done.tasks.filter((e) => e.id === idTaskCategory)[0].list.length;
            const lengthAllTasksInCategoryList = taskList.length;
            return lengthTasksDoneInCategoryList === lengthAllTasksInCategoryList ? true : false;
        }
        else {
            return false;
        }
    }
}


/***/ }),

/***/ "./ts/components/main/test-page/test-page.ts":
/*!***************************************************!*\
  !*** ./ts/components/main/test-page/test-page.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TestPage": () => (/* binding */ TestPage)
/* harmony export */ });
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap */ "../node_modules/bootstrap/dist/js/bootstrap.esm.js");
/* harmony import */ var _api_data_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/data-controller */ "./ts/api/data-controller.ts");
/* harmony import */ var _api_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/types */ "./ts/api/types.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
/* harmony import */ var _test_page_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./test-page.scss */ "./ts/components/main/test-page/test-page.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







class TestPage extends _common_control__WEBPACK_IMPORTED_MODULE_3__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'container py-5');
        window.scrollTo(0, 0);
        const test = _common_state__WEBPACK_IMPORTED_MODULE_4__.state.getTest();
        const testId = test.id;
        const testName = test.name;
        const testQuestions = test.questions;
        const user = _common_state__WEBPACK_IMPORTED_MODULE_4__.state.getUser();
        this.userAnswersForTest = [];
        const firstTestId = 1;
        const lastTestId = _common_state__WEBPACK_IMPORTED_MODULE_4__.state.getCategories(_api_types__WEBPACK_IMPORTED_MODULE_2__.Places.tests)
            .map((e) => e.items)
            .reverse()[0]
            .slice(-1)[0].id;
        const breadcrumbs = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'nav', 'breadcrumbs');
        breadcrumbs.node.setAttribute('style', '--bs-breadcrumb-divider: ">";');
        breadcrumbs.node.setAttribute('aria-label', 'breadcrumb');
        const breadcrumbsList = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](breadcrumbs.node, 'ol', 'breadcrumb');
        const breadcrumbsItemsNames = ['Главная', 'Тесты', `${testName}`];
        breadcrumbsItemsNames.forEach((e, i) => {
            if (i !== breadcrumbsItemsNames.length - 1) {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item pe-auto fs-5');
                const breadcrumbsItemLink = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](breadcrumbsItem.node, 'a', '', e);
                breadcrumbsItemLink.node.setAttribute('href', '#');
                breadcrumbsItem.node.onclick = () => this.switchPage(e, testId);
            }
            else {
                const breadcrumbsItem = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](breadcrumbsList.node, 'li', 'breadcrumb-item active fs-5', e);
                breadcrumbsItem.node.setAttribute('aria-current', 'page');
            }
        });
        const headingContainer = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'div', 'container d-flex flex-row');
        new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](headingContainer.node, 'h1', 'fw-bold mb-4', testName);
        if (_common_state__WEBPACK_IMPORTED_MODULE_4__.state.getAuthUser()) {
            if (this.isTestDone(testId, user)) {
                const iconDone = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](headingContainer.node, 'i', 'bi bi-check-square-fill');
                iconDone.node.setAttribute('title', 'Done');
                iconDone.node.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
      </svg>`;
            }
            const iconMark = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](headingContainer.node, 'i');
            const emptyBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">
      <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
    </svg>`;
            const fillBookMarkImg = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill" viewBox="0 0 16 16">
    <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/>
  </svg>`;
            if (this.isTestInFavourites(testId, user)) {
                iconMark.node.classList.add('bi-bookmark-fill');
                iconMark.node.setAttribute('title', 'Remove from favourites');
                iconMark.node.innerHTML = fillBookMarkImg;
            }
            else {
                iconMark.node.classList.add('bi-bookmark');
                iconMark.node.setAttribute('title', 'Add to favourites');
                iconMark.node.innerHTML = emptyBookMarkImg;
            }
            iconMark.node.onclick = () => {
                iconMark.node.classList.toggle('bi-bookmark');
                iconMark.node.classList.toggle('bi-bookmark-fill');
                if (iconMark.node.classList.contains('bi-bookmark-fill')) {
                    iconMark.node.innerHTML = fillBookMarkImg;
                    iconMark.node.setAttribute('title', 'Remove from favourites');
                    this.addTestToFavourites(testId, user);
                }
                else {
                    iconMark.node.innerHTML = emptyBookMarkImg;
                    iconMark.node.setAttribute('title', 'Add to favourites');
                    this.removeTestFromFavourites(testId, user);
                }
            };
        }
        new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'p', 'fst-italic ps-2 mb-4', 'Для прохождения теста нужно ответить правильно минимум на 70% вопросов');
        this.renderTestContent(this.node, testQuestions);
        const checkButtonWrapper = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'div', 'd-flex justify-content-center');
        this.checkButton = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](checkButtonWrapper.node, 'button', 'btn btn-success btn-lg fs-3 mb-5', 'Проверить результат');
        this.checkButton.node.disabled = true;
        this.checkButton.node.onclick = () => this.checkTest(testQuestions, testId);
        const buttonsTestsTasksContainer = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'div', 'd-grid gap-2 col-2 mx-auto mb-5');
        const buttonTask = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](buttonsTestsTasksContainer.node, 'button', 'btn btn-primary', 'Решить задачи');
        buttonTask.node.type = 'button';
        buttonTask.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.taskPage, testId);
        };
        const buttonTest = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](buttonsTestsTasksContainer.node, 'button', 'btn btn-primary', 'Повторить теорию');
        buttonTest.node.type = 'button';
        buttonTest.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.lessonPage, testId);
        };
        const buttonsPrevNextContainer = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'div', 'd-flex justify-content-sm-around mb-5');
        const buttonPrev = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к предыдущему тесту');
        buttonPrev.node.type = 'button';
        if (testId === firstTestId) {
            buttonPrev.node.classList.add('disabled');
        }
        else {
            buttonPrev.node.classList.remove('disabled');
            buttonPrev.node.onclick = () => this.switchPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testPage, testId - 1);
        }
        const buttonNext = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](buttonsPrevNextContainer.node, 'button', 'btn btn-secondary', 'Перейти к следующему тесту');
        buttonNext.node.type = 'button';
        if (testId === lastTestId) {
            buttonNext.node.classList.add('disabled');
        }
        buttonNext.node.onclick = () => {
            this.switchPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testPage, testId + 1);
        };
        const buttonUp = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'button', 'btn btn-outline-info position-fixed bottom-0 end-0 mx-3 my-3', '↑');
        buttonUp.node.onclick = () => window.scrollTo(0, 0);
    }
    checkTest(questions, id) {
        _common_state__WEBPACK_IMPORTED_MODULE_4__.state.playSound();
        const questionsCount = questions.length;
        let rightAnswersCount = 0;
        this.userAnswersForTest.forEach((e) => {
            const rightAnswer = questions.filter((el) => el.id === e.questionId)[0].rightAnswer.sort((a, b) => a - b);
            const usersAnswer = e.answersId.sort((a, b) => a - b);
            if (rightAnswer.join('') === usersAnswer.join('')) {
                rightAnswersCount += 1;
            }
        });
        const result = (rightAnswersCount / questionsCount) * 100;
        this.renderResultModal(id, result);
    }
    renderResultModal(id, result) {
        const modal = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](this.node, 'div', 'modal fade');
        modal.node.setAttribute('data-bs-backdrop', 'static');
        modal.node.setAttribute('data-bs-keyboard', 'false');
        const modalDialog = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modal.node, 'div', 'modal-dialog');
        const modalContent = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalDialog.node, 'div', 'modal-content');
        const modalHeader = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalContent.node, 'div', 'modal-header');
        new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalHeader.node, 'h5', 'modal-title text-body', 'Ваш результат');
        const modalCloseButton = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalHeader.node, 'button', 'btn-close');
        modalCloseButton.node.setAttribute('data-bs-dismiss', 'modal');
        modalCloseButton.node.setAttribute('aria-label', 'Закрыть');
        modalCloseButton.node.onclick = () => {
            _common_state__WEBPACK_IMPORTED_MODULE_4__.state.playSound();
            modal.destroy();
        };
        const modalBody = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalContent.node, 'div', 'modal-body');
        const modalText = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](modalBody.node, 'p', 'text-center display-3', `${result}%`);
        if (result < 50) {
            modalText.node.classList.add('text-danger');
        }
        else if (result < 70) {
            modalText.node.classList.add('text-primary');
        }
        else {
            modalText.node.classList.add('text-success');
            this.addTestToDone(id, result);
        }
        const myModal = new bootstrap__WEBPACK_IMPORTED_MODULE_0__.Modal(modal.node);
        myModal.show();
    }
    renderTestContent(node, questions) {
        const questionsWrapper = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](node, 'div', 'container mb-5');
        questions.forEach((e) => {
            const question = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](questionsWrapper.node, 'div');
            new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](question.node, 'b', 'mt-5', `Вопрос №${e.id}:`);
            const questionText = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](question.node, 'p', 'mb-4');
            questionText.node.innerHTML = e.question;
            e.answers.forEach((el) => {
                const answerWrapper = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](question.node, 'div', 'form-check');
                const input = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](answerWrapper.node, 'input', 'form-check-input');
                if (e.rightAnswer.length > 1) {
                    input.node.type = 'checkbox';
                }
                else {
                    input.node.type = 'radio';
                    input.node.name = `question${e.id}`;
                }
                input.node.id = `question${e.id}-answer${el.id}`;
                input.node.onchange = () => this.updateUserAnswersForTest(input.node, e.id, el.id, questions);
                const label = new _common_control__WEBPACK_IMPORTED_MODULE_3__["default"](answerWrapper.node, 'label', 'form-check-label', el.text);
                label.node.htmlFor = `question${e.id}-answer${el.id}`;
            });
        });
    }
    updateUserAnswersForTest(node, questionId, answerId, questions) {
        _common_state__WEBPACK_IMPORTED_MODULE_4__.state.playSound();
        let isQuestionExist = false;
        let isAnswerExist = false;
        const currentQuestion = this.userAnswersForTest.filter((e) => e.questionId === questionId);
        if (currentQuestion.length > 0) {
            isQuestionExist = true;
        }
        if (isQuestionExist && currentQuestion[0].answersId.includes(answerId)) {
            isAnswerExist = true;
        }
        if (node.checked) {
            if (!isAnswerExist) {
                if (isQuestionExist) {
                    if (node.type === 'checkbox') {
                        currentQuestion[0].answersId.push(answerId);
                    }
                    else {
                        currentQuestion[0].answersId = [answerId];
                    }
                }
                else {
                    this.userAnswersForTest.push({
                        questionId: questionId,
                        answersId: [answerId],
                    });
                }
            }
        }
        else {
            if (isAnswerExist) {
                const index = currentQuestion[0].answersId.indexOf(answerId);
                currentQuestion[0].answersId.splice(index, 1);
            }
        }
        if (this.userAnswersForTest.length === questions.length) {
            this.checkButton.node.removeAttribute('disabled');
        }
    }
    switchPage(page, id) {
        return __awaiter(this, void 0, void 0, function* () {
            let data;
            switch (page) {
                case _main__WEBPACK_IMPORTED_MODULE_5__.PagesList.mainPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.mainPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testsPage:
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testsPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getTest(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setTest(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.testPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_5__.PagesList.taskPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getTask(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setTask(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.taskPage);
                    break;
                case _main__WEBPACK_IMPORTED_MODULE_5__.PagesList.lessonPage:
                    data = yield _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.getLesson(id);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setLesson(data);
                    _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_5__.PagesList.lessonPage);
                    break;
            }
        });
    }
    isTestDone(id, user) {
        const doneTests = user.done.tests;
        const idAllLessonsDone = doneTests.map((e) => e.id);
        const result = idAllLessonsDone.find((idDone) => id === +idDone);
        return result ? true : false;
    }
    isTestInFavourites(id, user) {
        const userFavoritesTests = user.favourites.tests;
        const userFavoritesTestsId = userFavoritesTests.map((e) => e.id);
        return userFavoritesTestsId.includes(id) ? true : false;
    }
    addTestToFavourites(id, user) {
        if (!this.isTestInFavourites(id, user)) {
            user.favourites.tests.push({ id: Number(`${id}`) });
            _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
        }
    }
    removeTestFromFavourites(id, user) {
        if (this.isTestInFavourites(id, user)) {
            user.favourites.tests = user.favourites.tests.filter((e) => e.id !== id);
            _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
        }
    }
    addTestToDone(id, result) {
        const user = _common_state__WEBPACK_IMPORTED_MODULE_4__.state.getUser();
        const doneTests = user.done.tests;
        const idAllTestsDone = doneTests.map((e) => e.id);
        if (!idAllTestsDone.includes(id)) {
            user.done.tests.push({ id, result });
            user.place = _api_types__WEBPACK_IMPORTED_MODULE_2__.Places.tests;
            _common_state__WEBPACK_IMPORTED_MODULE_4__.state.setUserData(user);
            _api_data_controller__WEBPACK_IMPORTED_MODULE_1__.DataController.updateUserData();
        }
        else {
            const current = user.done.tests.filter((e) => e.id === id)[0];
            current.result = result;
        }
        console.log(user.done.tests);
    }
}


/***/ }),

/***/ "./ts/components/main/unauth-page/unauth-page.ts":
/*!*******************************************************!*\
  !*** ./ts/components/main/unauth-page/unauth-page.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UnauthPage": () => (/* binding */ UnauthPage)
/* harmony export */ });
/* harmony import */ var _api_auth_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/auth-controller */ "./ts/api/auth-controller.ts");
/* harmony import */ var _common_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/control */ "./ts/common/control.ts");
/* harmony import */ var _common_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/state */ "./ts/common/state.ts");
/* harmony import */ var _common_state_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/state-types */ "./ts/common/state-types.ts");
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../main */ "./ts/components/main/main.ts");
/* harmony import */ var _unauth_page_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./unauth-page.scss */ "./ts/components/main/unauth-page/unauth-page.scss");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






class UnauthPage extends _common_control__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor(parentNode) {
        super(parentNode, 'div', 'form container w-auto p-3');
        const form = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'form');
        const emailInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](form.node, 'div', 'mb-3');
        const emailLabel = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](emailInner.node, 'label', 'form-label', 'Почта');
        emailLabel.node.setAttribute('for', 'inputEmail');
        const emailInput = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](emailInner.node, 'input', 'form-control');
        emailInner.node.id = 'inputEmail';
        emailInput.node.type = 'email';
        emailInput.node.setAttribute('aria-describedby', 'emailHelp');
        const inputText = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](emailInner.node, 'div', 'form-text text-warning', 'Мы никогда не будем делиться вашей электронной почтой с кем-либо еще');
        const passInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](form.node, 'div', 'mb-3');
        const passLabel = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](passInner.node, 'label', 'form-label', 'Пароль');
        passLabel.node.setAttribute('for', 'InputPassword');
        const passInput = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](passInner.node, 'input', 'form-control');
        passInput.node.id = 'InputPassword';
        passInput.node.type = 'password';
        passInput.node.autocomplete = 'off';
        const nameInner = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](form.node, 'div', 'mb-3');
        const nameLabel = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](nameInner.node, 'label', 'form-label', 'Имя');
        nameLabel.node.setAttribute('for', 'InputName');
        const nameInput = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](nameInner.node, 'input', 'form-control');
        nameInput.node.id = 'InputName';
        nameInput.node.type = 'name';
        const onRegBtn = new _common_control__WEBPACK_IMPORTED_MODULE_1__["default"](this.node, 'button', 'btn btn-primary btn-lg', 'Зарегистрироваться');
        onRegBtn.node.type = 'button';
        onRegBtn.node.onclick = () => this.createNewUser(emailInput.node.value, passInput.node.value, nameInput.node.value);
        _common_state__WEBPACK_IMPORTED_MODULE_2__.state.onUpdate.add((type) => {
            switch (type) {
                case _common_state_types__WEBPACK_IMPORTED_MODULE_3__.StateOptions.validReg:
                    if (_common_state__WEBPACK_IMPORTED_MODULE_2__.state.getRegValid()) {
                        emailInput.node.classList.add('is-valid');
                        passInput.node.classList.add('is-valid');
                        emailInput.node.classList.remove('is-invalid');
                        passInput.node.classList.remove('is-invalid');
                        inputText.node.textContent = 'Мы никогда не будем делиться вашей электронной почтой с кем-либо еще';
                        inputText.node.classList.add('text-warning');
                        inputText.node.classList.remove('text-danger');
                    }
                    else {
                        emailInput.node.classList.add('is-invalid');
                        emailInput.node.classList.remove('is-valid');
                        passInput.node.classList.add('is-invalid');
                        passInput.node.classList.remove('is-valid');
                        inputText.node.textContent = 'Такой пользователь уже существует!';
                        inputText.node.classList.add('text-danger');
                        inputText.node.classList.remove('text-warning');
                    }
                    break;
            }
        });
    }
    createNewUser(email, password, name) {
        return __awaiter(this, void 0, void 0, function* () {
            const user = yield _api_auth_controller__WEBPACK_IMPORTED_MODULE_0__.AuthController.createNewUser(email, password, name);
            if (user) {
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setRegValid(true);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.authUser();
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setUserData(user);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setNewPage(_main__WEBPACK_IMPORTED_MODULE_4__.PagesList.mainPage);
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setPassword(password);
            }
            else {
                _common_state__WEBPACK_IMPORTED_MODULE_2__.state.setRegValid(false);
            }
        });
    }
}


/***/ }),

/***/ "./assets/svg/avatar.svg":
/*!*******************************!*\
  !*** ./assets/svg/avatar.svg ***!
  \*******************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjIuODggMTIyLjg4Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2IzYjNiMztmaWxsLXJ1bGU6ZXZlbm9kZDt9LmNscy0ye2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPm5vLXByb2ZpbGUtcGljdHVyZTwvdGl0bGU+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMjIuODggMCAxMjIuODggMTIyLjg4IDAgMTIyLjg4IDAgMCAwIDAiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik00OC42NCw3Ny43MmMuNjUtMS40OCwxLjI0LTMuMSwxLjYxLTQuMTlhNTIuNDMsNTIuNDMsMCwwLDEtNC4yMi02TDQxLjc2LDYwLjdhMTIuNTUsMTIuNTUsMCwwLDEtMi40My02LjIxLDQuOTQsNC45NCwwLDAsMSwuNDMtMi4yMyw0LjEsNC4xLDAsMCwxLDEuNDctMS43MSw0LjczLDQuNzMsMCwwLDEsMS0uNTIsMTA3LjcsMTA3LjcsMCwwLDEtLjItMTIuMjNBMTYuODcsMTYuODcsMCwwLDEsNDIuNTgsMzVhMTYuMzksMTYuMzksMCwwLDEsNy4yMi05LjIsMjIuNzksMjIuNzksMCwwLDEsNi4wNS0yLjY5YzEuMzctLjM5LTEuMTUtNC43Mi4yNS00Ljg3LDYuNzktLjcsMTcuNzcsNS41LDIyLjUxLDEwLjYyQTE2LjYzLDE2LjYzLDAsMCwxLDgyLjgsMzkuMzdsLS4yNywxMS4xaDBhMy4wNiwzLjA2LDAsMCwxLDIuMjUsMi4zMmMuMzUsMS4zNiwwLDMuMjUtMS4xOCw1Ljg0aDBhLjM3LjM3LDAsMCwxLS4wNy4xNGwtNC44Nyw4YTQxLjYsNDEuNiwwLDAsMS02LDguMjRjLjIzLjMyLjQ1LjYzLjY2Ljk0LDguMjUsMTIuMTEsMTkuMzgsNS44OCwzMi4zMiwxNS4zNmwtLjM4LjUxdjEyLjgySDE3LjIyVjkxLjQ3aC4yNGExLjE0LDEuMTQsMCwwLDEsLjU2LS42MUMyNi40LDg2LDQ1LjcyLDg0LjM1LDQ4LjY0LDc3LjcyWiIvPjwvc3ZnPg==";

/***/ }),

/***/ "./assets/svg/logo.svg":
/*!*****************************!*\
  !*** ./assets/svg/logo.svg ***!
  \*****************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIKCSBpZD0ic3ZnMiIgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCgkgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyOTcuNDVweCIKCSBoZWlnaHQ9IjMzNy4zNDJweCIgdmlld0JveD0iMCAwIDI5Ny40NSAzMzcuMzQyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyOTcuNDUgMzM3LjM0MiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjx0aXRsZSAgaWQ9InRpdGxlNCI+U2xpY2UgMTwvdGl0bGU+CjxwYXRoIGZpbGw9IiNENEI4MzAiIGQ9Ik0wLDBsMjcuMDcxLDMwMy42MmwxMjEuNDcyLDMzLjcyMmwxMjEuODExLTMzLjc3MUwyOTcuNDUsMEgweiBNMTM4LjcyNSwyNjcuNgoJYy05Mi41ODMtMTguNDY0LDAsMC05Mi45MzUtMTguNDVsLTUuMjE2LTU4LjQ2N2MxMi40NTksMCwzNy4zNzksMCwzNy4zNzksMGwyLjY1MiwyOS42OTdsMjAuNzQxLDMuMDM1Vjk2LjcxbC00Mi4zMTktMC4wMDEKCWwtMy40NTMtMzcuMjU0aDgzLjE1MVYyNjcuNnogTTI1My43OTcsOTYuNjk0SDE5OHYzOC4xMzJoNTIuNDc5TDI0MC4xNTksMjQ5LjE1bC04MS4wOTEsMTguNDUxdi0zOC44MTlsNDYuMjg0LTguNDI2bDQuNDg0LTQ4LjI5NAoJaC01MC43NjlWNTkuNDU1aDk4LjAzM0wyNTMuNzk3LDk2LjY5NHoiLz4KPC9zdmc+Cg==";

/***/ }),

/***/ "./assets/image/footer-logo.png":
/*!**************************************!*\
  !*** ./assets/image/footer-logo.png ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/01d8f0370c95214ada79.png";

/***/ }),

/***/ "./assets/image/sound-off.png":
/*!************************************!*\
  !*** ./assets/image/sound-off.png ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/943945d463618ff5e6e6.png";

/***/ }),

/***/ "./assets/image/sound-on.png":
/*!***********************************!*\
  !*** ./assets/image/sound-on.png ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/5aa7c5b1262bfc8093a7.png";

/***/ }),

/***/ "./assets/sound/click.mp3":
/*!********************************!*\
  !*** ./assets/sound/click.mp3 ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/032b32d79eb8aa145c26.mp3";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk"] = self["webpackChunk"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendors-node_modules_bootstrap_dist_js_bootstrap_esm_js"], () => (__webpack_require__("./index.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;